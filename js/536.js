"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[536],{6536:function(e,a,l){l.r(a),l.d(a,{default:function(){return X}});var o=l(4108),r=l(9096);const t={class:"col-12 offset-10"},s=(0,o.QD)("div",{class:"flex justify-content-between align-items-center"},[(0,o.QD)("h1",{class:"text-ggi-red"},"User Settings")],-1),n={class:"flex justify-content-start mb-4"},i={key:0},d={key:1};function c(e,a,l,c,u,m){const p=(0,o.E1)("Button"),f=(0,o.E1)("Column"),h=(0,o.E1)("DataTable"),y=(0,o.E1)("formModal");return(0,o.Wz)(),(0,o.An)("div",t,[s,(0,o.QD)("div",n,[(0,o.QD)("span",null,[(0,o.K2)(p,{autoRezise:"false",label:"Create",icon:"pi pi-plus",onClick:a[0]||(a[0]=e=>m.showModal("new")),class:"mr-2"})])]),(0,o.K2)(h,{ref:"dt",filters:u.filters,value:u.formData,selection:u.selectedForm,"onUpdate:selection":a[1]||(a[1]=e=>u.selectedForm=e),selectionMode:"single",onRowSelect:a[2]||(a[2]=e=>m.showModal("edit")),responsiveLayout:"scroll",sortField:"id",sortOrder:1,paginator:!0,rows:10,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown",rowsPerPageOptions:[10,20,30],removableSort:"",dataKey:"id","onUpdate:filters":a[3]||(a[3]=e=>u.filters=e),filterDisplay:"row"},{default:(0,o.Ql)((()=>[(0,o.K2)(f,{field:"id",header:"Form ID"}),(0,o.K2)(f,{field:"fullname",header:"Full Name"}),(0,o.K2)(f,{field:"username",header:"Username"}),(0,o.K2)(f,{field:"email",header:"Email"}),(0,o.K2)(f,{field:"loginDate",header:"Terakhir Login"}),(0,o.K2)(f,{field:"id_project.id",header:"Role"},{body:(0,o.Ql)((e=>[e.data.id_project&&null!==e.data.id_project.id?((0,o.Wz)(),(0,o.An)("span",i,(0,r.WA)(m.getStatusText(e.data.id_project.id)),1)):((0,o.Wz)(),(0,o.An)("span",d))])),_:1})])),_:1},8,["filters","value","selection"]),(0,o.K2)(y,{displayModal:u.displayModal,"onUpdate:displayModal":a[4]||(a[4]=e=>u.displayModal=e),form:u.selectedForm,"onUpdate:form":a[5]||(a[5]=e=>u.selectedForm=e),refreshList:m.getAllForms,action:u.action},null,8,["displayModal","form","refreshList","action"])])}var u=l(4432),m=l(5160),p=l(2340),f=l(8830),h=l(8331);const y={key:0,class:"p-m-0"},b={class:"text-ggi-red"},D={key:1,class:"p-m-0"},g=(0,o.QD)("span",{class:"text-ggi-red"},"Create New User",-1),C=[g],w={ref:"form"},v={class:"formgrid grid"},Q=(0,o.QD)("div",{class:"field col-12 md:col-10"},[(0,o.QD)("h3",{class:"text-base text-color surface-overlay surface-border border-round appearance-none outline-none focus:border-primary w-full"}," User Setting ")],-1),x={class:"field col-12 md-6"},j=(0,o.QD)("label",null,[(0,o.QD)("span",null,"Full Name")],-1),A={class:"field col-12 md-6"},M=(0,o.QD)("label",{for:"email"},"User Name",-1),k={class:"field col-12 md-6"},U=(0,o.QD)("label",{for:"email"},"Email",-1),K={class:"field col-12 md-6"},F=(0,o.QD)("label",{for:"email"},"Password",-1),_={class:"field col-12 md-12"},E=(0,o.QD)("label",null,"Role",-1),L={class:"flex justify-content-end flex-wrap"},V={class:"flex"};function S(e,a,l,t,s,n){const i=(0,o.E1)("Button"),d=(0,o.E1)("InputText"),c=(0,o.E1)("Dropdown"),u=(0,o.E1)("ConfirmDialog"),m=(0,o.E1)("Dialog");return(0,o.Wz)(),(0,o.Az)(m,{visible:l.displayModal,modal:!0,closable:!1,style:{width:"90vh"}},{header:(0,o.Ql)((()=>[l.form.id?((0,o.Wz)(),(0,o.An)("h3",y,[(0,o.QD)("span",b,"Edit User - "+(0,r.WA)(this.form.fullname),1)])):((0,o.Wz)(),(0,o.An)("h3",D,C)),(0,o.K2)(i,{label:"Close",icon:"pi pi-times",class:"button-rounded button-text ml-auto button-secondary",onClick:n.handleClose},null,8,["onClick"])])),footer:(0,o.Ql)((()=>[(0,o.QD)("div",L,[(0,o.QD)("div",V,[(0,o.K2)(i,{label:"Delete",icon:"pi pi-trash",onClick:n.confirmDelete},null,8,["onClick"]),(0,o.K2)(i,{label:"edit"==l.action?"Save":"Add User",icon:"edit"==l.action?"pi pi-save":"pi pi-plus",onClick:a[5]||(a[5]=e=>n.handleSubmit(l.action))},null,8,["label","icon"])])]),(0,o.K2)(u)])),default:(0,o.Ql)((()=>[(0,o.QD)("form",w,[(0,o.QD)("div",v,[Q,(0,o.QD)("div",x,[j,(0,o.K2)(d,{id:"namalengkap",modelValue:n.formCopy.fullname,"onUpdate:modelValue":a[0]||(a[0]=e=>n.formCopy.fullname=e),class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,o.QD)("div",A,[M,(0,o.K2)(d,{id:"email",modelValue:n.formCopy.username,"onUpdate:modelValue":a[1]||(a[1]=e=>n.formCopy.username=e),class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus-border-primary w-full"},null,8,["modelValue"])]),(0,o.QD)("div",k,[U,(0,o.K2)(d,{id:"email",modelValue:n.formCopy.email,"onUpdate:modelValue":a[2]||(a[2]=e=>n.formCopy.email=e),class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus-border-primary w-full"},null,8,["modelValue"])]),(0,o.QD)("div",K,[F,(0,o.K2)(d,{id:"email",modelValue:n.formCopy.password,"onUpdate:modelValue":a[3]||(a[3]=e=>n.formCopy.password=e),class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus-border-primary w-full"},null,8,["modelValue"])]),(0,o.QD)("div",_,[E,(0,o.K2)(c,{modelValue:n.formCopy.id_project.name,"onUpdate:modelValue":a[4]||(a[4]=e=>n.formCopy.id_project.name=e),options:s.statusoptionsname,class:"text-base text-color surface-overlay surface-border border-round appearance-none outline-none focus-border-primary w-full"},null,8,["modelValue","options"])])])],512)])),_:1},8,["visible"])}var P=l(100),z=l(3952),I=l(6960),T=l(9140);let N=new p.c;var W={components:{Dialog:P.c,Button:f.c,ConfirmDialog:z.c,InputText:I.c,Dropdown:T.c},props:["displayModal","form","refreshList","action","internetRate"],res:null,data(){return{statusoptionsname:["mazentaAdmin","banaraAdmin","narayaAdmin","marchandAdmin","superadmin"],projectMapping:{mazentaAdmin:1,banaraAdmin:2,narayaAdmin:3,marchandAdmin:4,superadmin:5}}},created(){"new"===this.action&&(this.idProject={id:null,name:null})},methods:{confirmDelete(){this.$confirm.require({message:"Are you sure you want to delete this user?",header:`Delete User - ${this.form.username} ?`,icon:"pi pi-exclamation-triangle",acceptLabel:"Delete User",rejectLabel:"Cancel",acceptClass:"p-button-danger",rejectClass:"p-button-primary",accept:()=>{this.deleteForm()},reject:()=>{}})},async deleteForm(){try{let e=null,a=this.formCopy.id;e=await N.user.deleteByID(a),this.handleClose(),this.refreshList(),this.$toast.add({severity:"success",summary:"User Deleted Successfully",detail:`User ${e.data.username} has been deleted`,life:3e3})}catch(e){console.error("Error while deleting user:",e)}},handleClose(){this.$emit("update:form",null),this.$emit("update:displayModal",!1)},async handleSubmit(){try{let e;e=null==this.form.id?{...this.formCopy,id_project:this.projectMapping[this.formCopy.id_project.name],role:2}:{...this.formCopy,id_project:this.projectId};let a=this.formCopy.id,l=null;l=null==this.form.id?await N.user.newEntry(e):await N.user.updateByID(a,e),this.handleClose(),this.refreshList(),this.$toast.add({severity:"success",summary:"Form Update Success",detail:`Form #${l.data.id} has been saved`,life:3e3})}catch(e){console.error("Error while saving form:",e)}}},computed:{formCopy(){return{...this.form}},projectId(){return this.formCopy.id_project?this.projectMapping[this.formCopy.id_project.name]:null}}},$=l(4100);const B=(0,$.c)(W,[["render",S]]);var R=B,O=l(884),q=l.n(O),G=new p.c,H={components:{DataTable:u.c,Column:m.c,formModal:R,Button:f.c},data(){return{formData:null,action:null,selectedForm:null,displayModal:!1,filters:{global:{value:null,matchMode:h.yI.CONTAINS}}}},created(){this.getAllForms()},methods:{getStatusText(e){switch(e){case 1:return"Mazenta";case 2:return"Banara";case 3:return"Naraya";case 4:return"Marchand";case 5:return"Super Admin";default:return""}},async getAllForms(){try{let e=q().stringify({populate:"id_project"}),a=await G.user.findAll(e);this.formData=a.data}catch(e){console.log(e)}},showModal(e){this.action=e,"new"==e&&(this.selectedForm={id:null,id_project:{id:null,name:null}}),this.displayModal=!0}}};const J=(0,$.c)(H,[["render",c]]);var X=J}}]);
//# sourceMappingURL=536.js.map