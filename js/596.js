"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[596],{1147:function(e,t,a){a.d(t,{c:function(){return y}});var l=a(4108),r=a(9096);function o(e,t,a,o,s,n){const i=(0,l.E1)("Tag");return a.modelValue?((0,l.Wz)(),(0,l.Az)(i,{key:0,severity:n.tag(a.modelValue),class:"p-text-capitalize"},{default:(0,l.Ql)((()=>[(0,l.mY)((0,r.WA)(a.modelValue.replace(/_/g," ")),1)])),_:1},8,["severity"])):(0,l.g1)("",!0)}var s=a(7988),n=a(9435),i={root:function(e){var t=e.props;return["p-tag p-component",{"p-tag-info":"info"===t.severity,"p-tag-success":"success"===t.severity,"p-tag-warning":"warning"===t.severity,"p-tag-danger":"danger"===t.severity,"p-tag-secondary":"secondary"===t.severity,"p-tag-contrast":"contrast"===t.severity,"p-tag-rounded":t.rounded}]},icon:"p-tag-icon",value:"p-tag-value"},u=n.c.extend({name:"tag",classes:i}),d={name:"BaseTag",extends:s.c,props:{value:null,severity:null,rounded:Boolean,icon:String},style:u,provide:function(){return{$parentInstance:this}}},c={name:"Tag",extends:d};function p(e,t,a,o,s,n){return(0,l.Wz)(),(0,l.An)("span",(0,l.Gu)({class:e.cx("root")},e.ptm("root")),[e.$slots.icon?((0,l.Wz)(),(0,l.Az)((0,l.mk)(e.$slots.icon),(0,l.Gu)({key:0,class:e.cx("icon")},e.ptm("icon")),null,16,["class"])):e.icon?((0,l.Wz)(),(0,l.An)("span",(0,l.Gu)({key:1,class:[e.cx("icon"),e.icon]},e.ptm("icon")),null,16)):(0,l.g1)("",!0),e.value||e.$slots["default"]?(0,l.oF)(e.$slots,"default",{key:2},(function(){return[(0,l.QD)("span",(0,l.Gu)({class:e.cx("value")},e.ptm("value")),(0,r.WA)(e.value),17)]})):(0,l.g1)("",!0)],16)}c.render=p;var m={components:{Tag:c},props:["modelValue"],methods:{tag(e){switch(e){case"Aktif":return"success";case"Batal":return"danger";case"Non-Aktif":return"danger";default:return""}}}},f=a(4100);const b=(0,f.c)(m,[["render",o]]);var y=b},596:function(e,t,a){a.r(t),a.d(t,{default:function(){return le}});var l=a(4108),r=a(9096);const o={class:"col-12 offset-10"},s=(0,l.QD)("div",{class:"flex justify-content-between align-items-center"},[(0,l.QD)("h1",{class:"text-ggi-red"},"Internet Rates Panel")],-1),n={class:"flex justify-content-start mb-4"},i={class:"p-input-icon-left"},u=(0,l.QD)("i",{class:"pi pi-search"},null,-1);function d(e,t,a,d,c,p){const m=(0,l.E1)("Button"),f=(0,l.E1)("InputText"),b=(0,l.E1)("Dropdown"),y=(0,l.E1)("Column"),h=(0,l.E1)("StatusTag"),g=(0,l.E1)("DataTable"),v=(0,l.E1)("formModal");return(0,l.Wz)(),(0,l.An)("div",o,[s,(0,l.QD)("div",n,[(0,l.QD)("span",null,[(0,l.K2)(m,{autoRezise:"false",label:"Create",icon:"pi pi-plus",onClick:t[0]||(t[0]=e=>p.showModal("new")),class:"mr-2"})]),(0,l.QD)("span",i,[u,(0,l.K2)(f,{modelValue:c.filters["global"].value,"onUpdate:modelValue":t[1]||(t[1]=e=>c.filters["global"].value=e),placeholder:"Keyword Search",class:"w-10rem"},null,8,["modelValue"])]),(0,l.QD)("span",null,[(0,l.K2)(b,{modelValue:c.selectedStatus,"onUpdate:modelValue":t[2]||(t[2]=e=>c.selectedStatus=e),options:c.statusfilter,placeholder:"Select a Status",class:"w-full md:w-9rem ml-2"},null,8,["modelValue","options"])]),(0,l.QD)("span",null,[(0,l.K2)(b,{modelValue:c.selectedProject,"onUpdate:modelValue":t[3]||(t[3]=e=>c.selectedProject=e),options:c.projectfilter,placeholder:"Project",class:"w-full md:w-9rem ml-2"},null,8,["modelValue","options"])])]),(0,l.K2)(g,{ref:"dt",filters:c.filters,value:c.formData,selection:c.selectedForm,"onUpdate:selection":t[4]||(t[4]=e=>c.selectedForm=e),selectionMode:"single",onRowSelect:t[5]||(t[5]=e=>p.showModal("edit")),responsiveLayout:"scroll",sortField:"id",sortOrder:1,paginator:!0,rows:15,rowsPerPageOptions:[15,20,30],removableSort:"",dataKey:"id","onUpdate:filters":t[6]||(t[6]=e=>c.filters=e),filterDisplay:"row"},{default:(0,l.Ql)((()=>[(0,l.K2)(y,{field:"id",header:"ID"}),(0,l.K2)(y,{field:"attributes.name",header:"Speed IT"}),(0,l.K2)(y,{field:"attributes.price",header:"Tarif IT"}),(0,l.K2)(y,{field:"attributes.startRate",header:"Start Rate"}),(0,l.K2)(y,{field:"attributes.endRate",header:"End Rate"}),(0,l.K2)(y,{field:"attributes.project",header:"Project"},{body:(0,l.Ql)((e=>[(0,l.QD)("span",null,(0,r.WA)(p.getStatusText(e.data.attributes.project.data.id)),1)])),_:1}),(0,l.K2)(y,{field:"attributes.status",header:"Status"},{body:(0,l.Ql)((e=>[(0,l.K2)(h,{modelValue:e.data.attributes.status,"onUpdate:modelValue":t=>e.data.attributes.status=t},null,8,["modelValue","onUpdate:modelValue"])])),_:1})])),_:1},8,["filters","value","selection"]),(0,l.K2)(v,{displayModal:c.displayModal,"onUpdate:displayModal":t[7]||(t[7]=e=>c.displayModal=e),form:c.selectedForm,"onUpdate:form":t[8]||(t[8]=e=>c.selectedForm=e),refreshList:p.getAllForms,action:c.action},null,8,["displayModal","form","refreshList","action"])])}var c=a(4432),p=a(5160),m=a(2340),f=a(9140),b=a(8830),y=a(6960),h=a(1147),g=a(8331);const v={key:0,class:"p-m-0"},D={class:"text-ggi-red"},w={key:1,class:"p-m-0"},C=(0,l.QD)("span",{class:"text-ggi-red"},"Create New Internet Rate",-1),Q=[C],A={ref:"form"},x={class:"formgrid grid"},V=(0,l.QD)("div",{class:"field col-12 md:col-10"},[(0,l.QD)("h3",{class:"text-base text-color surface-overlay surface-border border-round appearance-none outline-none focus:border-primary w-full"}," Internet Rate")],-1),S={class:"field col-12 md:col-2"},j=(0,l.QD)("label",null,[(0,l.QD)("span",null,"Status")],-1),R={class:"field col-12 md:col-4"},I=(0,l.QD)("label",null,[(0,l.QD)("span",null,"Speed IT")],-1),M={class:"field col-12 md:col-4"},K=(0,l.QD)("label",{for:"alamatpemasang"},"Tarif IT Rp.",-1),E={class:"field col-12 md:col-4"},k=(0,l.QD)("label",null,"Project",-1),T={class:"field col-12 md:col-6"},F=(0,l.QD)("label",null,"Start Rate",-1),z={class:"field col-12 md:col-6"},U=(0,l.QD)("label",null,"End Rate",-1),P={class:"flex justify-content-between flex-wrap"},W={class:"flex"};function B(e,t,a,o,s,n){const i=(0,l.E1)("Button"),u=(0,l.E1)("Dropdown"),d=(0,l.E1)("InputText"),c=(0,l.E1)("InputNumber"),p=(0,l.E1)("Calendar"),m=(0,l.E1)("ConfirmDialog"),f=(0,l.E1)("Dialog");return(0,l.Wz)(),(0,l.Az)(f,{visible:a.displayModal,modal:!0,closable:!1,style:{width:"90vh"}},{header:(0,l.Ql)((()=>[a.form.id?((0,l.Wz)(),(0,l.An)("h3",v,[(0,l.QD)("span",D,"Edit Internet Rate - "+(0,r.WA)(a.form.attributes.name),1)])):((0,l.Wz)(),(0,l.An)("h3",w,Q)),(0,l.K2)(i,{label:"Close",icon:"pi pi-times",class:"button-rounded button-text ml-auto button-secondary",onClick:n.handleClose},null,8,["onClick"])])),footer:(0,l.Ql)((()=>[(0,l.QD)("div",P,[(0,l.QD)("div",W,[(0,l.K2)(i,{label:"edit"==a.action?"Save":"Add Document",icon:"edit"==a.action?"pi pi-save":"pi pi-plus",onClick:t[6]||(t[6]=e=>n.handleSubmit(a.action))},null,8,["label","icon"])])]),(0,l.K2)(m)])),default:(0,l.Ql)((()=>[(0,l.QD)("form",A,[(0,l.QD)("div",x,[V,(0,l.QD)("div",S,[j,(0,l.K2)(u,{modelValue:n.formCopy.attributes.status,"onUpdate:modelValue":t[0]||(t[0]=e=>n.formCopy.attributes.status=e),options:s.statusoptions,class:"text-base text-color surface-overlay surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue","options"])]),(0,l.QD)("div",R,[I,(0,l.K2)(d,{modelValue:n.formCopy.attributes.name,"onUpdate:modelValue":t[1]||(t[1]=e=>n.formCopy.attributes.name=e),class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,l.QD)("div",M,[K,(0,l.K2)(c,{modelValue:n.formCopy.attributes.price,"onUpdate:modelValue":t[2]||(t[2]=e=>n.formCopy.attributes.price=e),mode:"currency",currency:"IDR",class:"text-base text-color surface-overlay surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,l.QD)("div",E,[k,(0,l.K2)(u,{modelValue:n.formCopy.attributes.project.data.attributes.name,"onUpdate:modelValue":t[3]||(t[3]=e=>n.formCopy.attributes.project.data.attributes.name=e),options:s.statusoptionsname,class:"text-base text-color surface-overlay surface-border border-round appearance-none outline-none focus-border-primary w-full"},null,8,["modelValue","options"])]),(0,l.QD)("div",T,[F,(0,l.K2)(p,{modelValue:n.formCopy.attributes.startRate,"onUpdate:modelValue":t[4]||(t[4]=e=>n.formCopy.attributes.startRate=e),showIcon:"",dateFormat:"yy-mm-dd",class:"text-base text-color surface-overlay surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,l.QD)("div",z,[U,(0,l.K2)(p,{modelValue:n.formCopy.attributes.endRate,"onUpdate:modelValue":t[5]||(t[5]=e=>n.formCopy.attributes.endRate=e),showIcon:"",dateFormat:"yy-mm-dd",class:"text-base text-color surface-overlay surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])])])],512)])),_:1},8,["visible"])}var N=a(100),$=a(6592),L=a(2332),_=a(3952);let O=new m.c;var G={components:{Dialog:N.c,Button:b.c,ConfirmDialog:_.c,InputText:y.c,Dropdown:f.c,Calendar:L.c,InputNumber:$.c},props:["displayModal","form","refreshList","action","internetRate"],res:null,data(){return{statusoptions:["Non-Aktif","Aktif"],statusoptionsname:["mazentaAdmin","banaraAdmin","narayaAdmin","marchandAdmin"],projectMapping:{mazentaAdmin:1,banaraAdmin:2,narayaAdmin:3,marchandAdmin:4}}},methods:{handleClose(){this.$emit("update:form",null),this.$emit("update:displayModal",!1)},async handleSubmit(){try{if(this.formCopy.attributes.startRate){const e=new Date(this.formCopy.attributes.startRate);e.setHours(e.getHours()+7),this.formCopy.attributes.startRate=e.toISOString()}if(this.formCopy.attributes.endRate){const e=new Date(this.formCopy.attributes.endRate);e.setHours(e.getHours()+7),this.formCopy.attributes.endRate=e.toISOString()}let e={...this.formCopy.attributes,project:this.projectMapping[this.formCopy.attributes.project.data.attributes.name]},t=this.formCopy.id,a=null,l={data:e};a=null==this.form.id?await O.internetRate.newEntry(l):await O.internetRate.updateByID(t,l),this.handleClose(),this.refreshList(),this.$toast.add({severity:"success",summary:"Form Update Success",detail:`Form #${a.data.data.id} has been saved`,life:3e3})}catch(e){console.error("Error while saving form:",e)}}},computed:{formCopy(){return{...this.form}}}},H=a(4100);const Y=(0,H.c)(G,[["render",B]]);var q=Y,J=a(884),X=a.n(J),Z=a(6716),ee=new m.c,te={components:{DataTable:c.c,Column:p.c,InputText:y.c,formModal:q,Dropdown:f.c,StatusTag:h.c,Button:b.c},data(){return{formData:null,internetRate:null,action:null,selectedInternet:null,selectedForm:null,role:Z.c.getters.getRole,displayModal:!1,statusfilter:["Semua","Non-Aktif","Aktif"],selectedStatus:"Semua",projectfilter:["Project","Mazenta","Banara","Naraya","Marchand"],selectedProject:"Project",filters:{global:{value:null,matchMode:g.yI.CONTAINS},"attributes.status":{value:null,matchMode:g.yI.EQUALS},"attributes.project.data.id":{value:null,matchMode:g.yI.EQUALS}}}},created(){this.getAllForms()},watch:{selectedStatus(e){"Semua"!==e?(this.filters["attributes.status"].value=e,this.getAllForms()):(this.filters["attributes.status"].value=null,this.getAllForms())},selectedProject(e){"Project"!==e?("Mazenta"==e&&(this.filters["attributes.project.data.id"].value=1),"Banara"==e&&(this.filters["attributes.project.data.id"].value=2),"Naraya"==e&&(this.filters["attributes.project.data.id"].value=3),"Marchand"==e&&(this.filters["attributes.project.data.id"].value=4),this.getAllForms()):(this.filters["attributes.project.data.id"].value=null,this.getAllForms())}},methods:{getStatusText(e){switch(e){case 1:return"Mazenta";case 2:return"Banara";case 3:return"Naraya";case 4:return"Marchand";default:return""}},async getAllForms(){try{let e=X().stringify({populate:"project"}),t=await ee.internetRate.findAll(e);this.filterInternet(t.data.data)}catch(e){console.log(e)}},filterInternet(e){let t=Z.c.getters.getRole;this.formData=e.filter((e=>{const a=e.attributes.project;if("superadmin"==t)return a}))},showModal(e){this.action=e,"new"==e&&(this.selectedForm={id:null,attributes:{project:{data:{id:null,attributes:{name:null}}}}}),this.displayModal=!0}}};const ae=(0,H.c)(te,[["render",d]]);var le=ae}}]);
//# sourceMappingURL=596.js.map