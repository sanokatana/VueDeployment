"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[888],{5888:function(e,t,a){a.r(t),a.d(t,{default:function(){return et}});var o=a(4108);const l={class:"col-12 offset-10"},r=(0,o.QD)("div",{class:"flex justify-content-between align-items-center"},[(0,o.QD)("h1",{class:"text-ggi-red"},"Panel Form - Pemasangan & Pemutusan Internet")],-1),s={class:"flex justify-content-start mb-4"},n={class:"p-input-icon-left"},i=(0,o.QD)("i",{class:"pi pi-search"},null,-1);function d(e,t,a,d,u,m){const c=(0,o.E1)("InputText"),p=(0,o.E1)("Dropdown"),f=(0,o.E1)("Column"),b=(0,o.E1)("StatusTag"),g=(0,o.E1)("DataTable"),y=(0,o.E1)("formModal");return(0,o.Wz)(),(0,o.An)("div",l,[r,(0,o.QD)("div",s,[(0,o.QD)("span",n,[i,(0,o.K2)(c,{modelValue:u.filters["global"].value,"onUpdate:modelValue":t[0]||(t[0]=e=>u.filters["global"].value=e),placeholder:"Keyword Search",class:"w-10rem"},null,8,["modelValue"])]),(0,o.QD)("span",null,[(0,o.K2)(p,{modelValue:u.selectedStatus,"onUpdate:modelValue":t[1]||(t[1]=e=>u.selectedStatus=e),options:u.statusfilter,placeholder:"Select a City",class:"w-full md:w-9rem ml-2"},null,8,["modelValue","options"])])]),(0,o.K2)(g,{ref:"dt",filters:u.filters,value:u.formData,selectionMode:"single",onRowSelect:t[2]||(t[2]=e=>m.showModal("edit",e.data)),responsiveLayout:"scroll",sortField:"id",sortOrder:1,paginator:!0,rows:15,rowsPerPageOptions:[15,20,30],removableSort:"",dataKey:"id","onUpdate:filters":t[3]||(t[3]=e=>u.filters=e),filterDisplay:"row"},{default:(0,o.Ql)((()=>[(0,o.K2)(f,{field:"id",header:"Form ID"}),(0,o.K2)(f,{field:"attributes.namalengkap",header:"Nama Lengkap"}),(0,o.K2)(f,{field:"attributes.email",header:"Email"}),(0,o.K2)(f,{field:"attributes.noktp",header:"NoKTP"}),(0,o.K2)(f,{field:"attributes.notelp",header:"NoTelp/HP"}),(0,o.K2)(f,{field:"attributes.status",header:"Status"},{body:(0,o.Ql)((e=>[(0,o.K2)(b,{modelValue:e.data.attributes.status,"onUpdate:modelValue":t=>e.data.attributes.status=t},null,8,["modelValue","onUpdate:modelValue"])])),_:1})])),_:1},8,["filters","value"]),(0,o.K2)(y,{displayModal:u.displayModal,"onUpdate:displayModal":t[4]||(t[4]=e=>u.displayModal=e),form:u.selectedForm,"onUpdate:form":t[5]||(t[5]=e=>u.selectedForm=e),refreshList:m.getAllForms,action:u.action},null,8,["displayModal","form","refreshList","action"])])}var u=a(4432),m=a(5160),c=a(2340),p=a(6960),f=a(9140),b=a(8331),g=a(1147),y=a(9096);const h={class:"p-m-0"},x={class:"text-ggi-red"},C={ref:"form"},D={class:"formgrid grid"},v=(0,o.QD)("div",{class:"field col-12 md:col-7"},[(0,o.QD)("h3",{class:"text-base text-color surface-overlay surface-border border-round appearance-none outline-none focus:border-primary w-full"}," Data Pelanggan")],-1),T={class:"field col-12 md:col-3"},w=(0,o.QD)("label",null,[(0,o.QD)("span",null,"Tipe Form")],-1),V={class:"field col-12 md:col-2"},Q=(0,o.QD)("label",null,[(0,o.QD)("span",null,"Status")],-1),k={class:"field col-12 md:col-6"},F=(0,o.QD)("label",null,[(0,o.QD)("span",null,"Nama Lengkap:")],-1),U={class:"field col-12 md:col-6"},K=(0,o.QD)("label",{for:"email"},"Email",-1),P={class:"field col-12 md:col-6"},I=(0,o.QD)("label",{for:"noktp"},"NoKTP",-1),S={class:"field col-12 md:col-6"},M=(0,o.QD)("label",{for:"noktp"},"NoTelp/HP",-1),E={class:"field col-12 md:col-12"},R=(0,o.QD)("label",{for:"alamatpemasang"},"Alamat Pemasang",-1),B={class:"field col-12 md:col-12"},N=(0,o.QD)("label",{for:"kelpemasang"},"Kelurahan Pemasang",-1),A={class:"field col-12 md:col-12"},L=(0,o.QD)("label",{for:"kecpemasang"},"Kecamatan Pemasang",-1),O={class:"field col-12 md:col-12"},H=(0,o.QD)("label",{for:"pospemasang"},"POS Pemasang",-1),$={class:"field col-12 md:col-12"},z=(0,o.QD)("label",{for:"alamattagihan"},"Alamat Tagihan",-1),_={class:"field col-12 md:col-12"},j=(0,o.QD)("label",{for:"keltagihan"},"Kelurahan Tagihan",-1),W={class:"field col-12 md:col-12"},Y=(0,o.QD)("label",{for:"kectagihan"},"Kecamatan Tagihan",-1),J={class:"field col-12 md:col-12"},q=(0,o.QD)("label",{for:"postagihan"},"POS Tagihan",-1),G={class:"field col-12 md:col-3"},X=(0,o.QD)("label",{for:"instalasi"},"Internet Instalasi",-1),Z={class:"field col-12 md:col-3"},ee=(0,o.QD)("label",{for:"postagihan"},"Internet Customer Memilih",-1),te={class:"field col-12 md:col-3"},ae=(0,o.QD)("label",{for:"internetRate"},"Internet Rate",-1),oe={class:"field col-12 md:col-3"},le=(0,o.QD)("label",{for:"postagihan"},"Harga",-1),re=(0,o.QD)("div",{class:"field col-12 md:col-12"},[(0,o.mY)(" ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------- "),(0,o.QD)("h3",{class:"text-base text-color surface-overlay surface-border border-round appearance-none outline-none focus:border-primary w-full"}," Admin Form Input")],-1),se={class:"field col-12 md:col-6"},ne=(0,o.QD)("label",{for:"merekModem"},"Merek Modem/Router",-1),ie={class:"field col-12 md:col-6"},de=(0,o.QD)("label",null,"Serial Number",-1),ue=(0,o.QD)("div",{class:"field col-12 md:col-12"},[(0,o.QD)("h3",{class:"text-base text-color surface-overlay surface-border border-round appearance-none outline-none focus:border-primary w-full"}," Infomrasi Pemasangan")],-1),me={class:"field col-12 md:col-6"},ce=(0,o.QD)("label",{for:"namainstaller"},"Nama Installer",-1),pe={class:"field col-12 md:col-6"},fe=(0,o.QD)("label",null,"Tanggal Pemasang",-1),be=(0,o.QD)("div",{class:"field col-12 md:col-12"},[(0,o.QD)("h3",{class:"text-base text-color surface-overlay surface-border border-round appearance-none outline-none focus:border-primary w-full"}," Informasi Pemutusan")],-1),ge={class:"field col-12 md:col-6"},ye=(0,o.QD)("label",{for:"namainstaller"},"Nama Installer",-1),he={class:"field col-12 md:col-6"},xe=(0,o.QD)("label",null,"Tanggal Pemutusan",-1),Ce=(0,o.QD)("div",{class:"field col-12 md:col-12"},[(0,o.mY)(" ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------- "),(0,o.QD)("h3",{class:"text-base text-color surface-overlay surface-border border-round appearance-none outline-none focus:border-primary w-full"}," Informasi Printing")],-1),De={class:"field col-12 md:col-3"},ve=(0,o.QD)("label",{for:"namainstaller"},"Nama Tenant Relation",-1),Te={class:"field col-12 md:col-3"},we=(0,o.QD)("label",{for:"namainstaller"},"Nama IT",-1),Ve={class:"field col-12 md:col-3"},Qe=(0,o.QD)("label",{for:"namainstaller"},"Nama Tenant Management",-1),ke={class:"field col-12 md:col-3"},Fe=(0,o.QD)("label",null,"Tanggal Print",-1),Ue={class:"flex justify-content-between flex-wrap"},Ke={class:"flex"},Pe={class:"flex"},Ie=["src"];function Se(e,t,a,l,r,s){const n=(0,o.E1)("Button"),i=(0,o.E1)("Dropdown"),d=(0,o.E1)("InputText"),u=(0,o.E1)("Textarea"),m=(0,o.E1)("ToggleButton"),c=(0,o.E1)("InternetRate"),p=(0,o.E1)("InputNumber"),f=(0,o.E1)("Calendar"),b=(0,o.E1)("ConfirmDialog"),g=(0,o.E1)("Dialog");return(0,o.Wz)(),(0,o.An)(o.ae,null,[(0,o.K2)(g,{visible:a.displayModal,modal:!0,closable:!1,style:{width:"90vh"}},{header:(0,o.Ql)((()=>[(0,o.QD)("h3",h,[(0,o.QD)("span",x,"Edit Customer Form Internet Number # "+(0,y.WA)(a.form.id),1)]),(0,o.K2)(n,{label:"Close",icon:"pi pi-times",class:"button-rounded button-text ml-auto button-secondary",onClick:s.handleClose},null,8,["onClick"])])),footer:(0,o.Ql)((()=>[(0,o.QD)("div",Ue,[(0,o.QD)("div",Ke,[(0,o.K2)(n,{label:"Print",icon:"pi pi-print",onClick:t[29]||(t[29]=e=>s.fillForm())}),(0,o.K2)(n,{label:"View KTP",icon:"pi pi-image",onClick:s.viewKTP},null,8,["onClick"])]),(0,o.QD)("div",Pe,[(0,o.K2)(n,{label:"edit"==a.action?"Save":"Add Document",icon:"edit"==a.action?"pi pi-save":"pi pi-plus",onClick:t[30]||(t[30]=e=>s.handleSubmit(a.action))},null,8,["label","icon"])])]),(0,o.K2)(b)])),default:(0,o.Ql)((()=>[(0,o.QD)("form",C,[(0,o.QD)("div",D,[v,(0,o.QD)("div",T,[w,(0,o.K2)(i,{modelValue:s.formCopy.attributes.tipeform,"onUpdate:modelValue":t[0]||(t[0]=e=>s.formCopy.attributes.tipeform=e),options:r.tipeformoptions,class:"text-base text-color surface-overlay surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue","options"])]),(0,o.QD)("div",V,[Q,(0,o.K2)(i,{modelValue:s.formCopy.attributes.status,"onUpdate:modelValue":t[1]||(t[1]=e=>s.formCopy.attributes.status=e),options:r.statusoptions,class:"text-base text-color surface-overlay surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue","options"])]),(0,o.QD)("div",k,[F,(0,o.K2)(d,{id:"namalengkap",modelValue:s.formCopy.attributes.namalengkap,"onUpdate:modelValue":t[2]||(t[2]=e=>s.formCopy.attributes.namalengkap=e),class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,o.QD)("div",U,[K,(0,o.K2)(d,{id:"email",modelValue:s.formCopy.attributes.email,"onUpdate:modelValue":t[3]||(t[3]=e=>s.formCopy.attributes.email=e),class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,o.QD)("div",P,[I,(0,o.K2)(d,{id:"noktp",modelValue:s.formCopy.attributes.noktp,"onUpdate:modelValue":t[4]||(t[4]=e=>s.formCopy.attributes.noktp=e),class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,o.QD)("div",S,[M,(0,o.K2)(d,{id:"noktp",modelValue:s.formCopy.attributes.notelp,"onUpdate:modelValue":t[5]||(t[5]=e=>s.formCopy.attributes.notelp=e),class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,o.QD)("div",E,[R,(0,o.K2)(u,{id:"alamatpemasang",autoResize:"",rows:"2",modelValue:s.formCopy.attributes.alamatpemasang,"onUpdate:modelValue":t[6]||(t[6]=e=>s.formCopy.attributes.alamatpemasang=e),class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,o.QD)("div",B,[N,(0,o.K2)(u,{id:"kelpemasang",autoResize:"",rows:"2",modelValue:s.formCopy.attributes.kelpemasang,"onUpdate:modelValue":t[7]||(t[7]=e=>s.formCopy.attributes.kelpemasang=e),class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,o.QD)("div",A,[L,(0,o.K2)(u,{id:"kecpemasang",autoResize:"",rows:"2",modelValue:s.formCopy.attributes.kecpemasang,"onUpdate:modelValue":t[8]||(t[8]=e=>s.formCopy.attributes.kecpemasang=e),class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,o.QD)("div",O,[H,(0,o.K2)(d,{id:"pospemasang",modelValue:s.formCopy.attributes.pospemasang,"onUpdate:modelValue":t[9]||(t[9]=e=>s.formCopy.attributes.pospemasang=e),class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,o.QD)("div",$,[z,(0,o.K2)(u,{id:"alamattagihan",autoResize:"",rows:"2",modelValue:s.formCopy.attributes.alamattagihan,"onUpdate:modelValue":t[10]||(t[10]=e=>s.formCopy.attributes.alamattagihan=e),class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,o.QD)("div",_,[j,(0,o.K2)(u,{id:"keltagihan",autoResize:"",rows:"2",modelValue:s.formCopy.attributes.keltagihan,"onUpdate:modelValue":t[11]||(t[11]=e=>s.formCopy.attributes.keltagihan=e),class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,o.QD)("div",W,[Y,(0,o.K2)(u,{id:"kectagihan",autoResize:"",rows:"2",modelValue:s.formCopy.attributes.kectagihan,"onUpdate:modelValue":t[12]||(t[12]=e=>s.formCopy.attributes.kectagihan=e),class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,o.QD)("div",J,[q,(0,o.K2)(d,{id:"postagihan",modelValue:s.formCopy.attributes.postagihan,"onUpdate:modelValue":t[13]||(t[13]=e=>s.formCopy.attributes.postagihan=e),class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,o.QD)("div",G,[X,(0,o.K2)(m,{id:"instalasi",modelValue:s.formCopy.attributes.instalasi,"onUpdate:modelValue":t[14]||(t[14]=e=>s.formCopy.attributes.instalasi=e),class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,o.QD)("div",Z,[ee,(0,o.K2)(d,{id:"postagihan",modelValue:s.formCopy.attributes.premie,"onUpdate:modelValue":t[15]||(t[15]=e=>s.formCopy.attributes.premie=e),disabled:"",class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,o.QD)("div",te,[ae,(0,o.K2)(c,{id:"internetRate",modelValue:s.formCopy.attributes.internetID.data,"onUpdate:modelValue":t[16]||(t[16]=e=>s.formCopy.attributes.internetID.data=e),dataForm:s.formCopy,"onUpdate:dataForm":t[17]||(t[17]=e=>s.formCopy=e),class:"text-base text-color surface-overlay surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue","dataForm"])]),(0,o.QD)("div",oe,[le,(0,o.K2)(p,{modelValue:s.computedPrice,"onUpdate:modelValue":t[18]||(t[18]=e=>s.computedPrice=e),disabled:"",class:"text-base text-color surface-overlay surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),re,(0,o.QD)("div",se,[ne,(0,o.K2)(d,{id:"merekModem",modelValue:s.formCopy.attributes.merekModem,"onUpdate:modelValue":t[19]||(t[19]=e=>s.formCopy.attributes.merekModem=e),class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,o.QD)("div",ie,[de,(0,o.K2)(d,{id:"serialnumber",modelValue:s.formCopy.attributes.serialnumber,"onUpdate:modelValue":t[20]||(t[20]=e=>s.formCopy.attributes.serialnumber=e),class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),ue,(0,o.QD)("div",me,[ce,(0,o.K2)(d,{id:"namainstaller",modelValue:s.formCopy.attributes.namainstaller,"onUpdate:modelValue":t[21]||(t[21]=e=>s.formCopy.attributes.namainstaller=e),class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,o.QD)("div",pe,[fe,(0,o.K2)(f,{id:"serialnumber",modelValue:s.formCopy.attributes.tglPemasang,"onUpdate:modelValue":t[22]||(t[22]=e=>s.formCopy.attributes.tglPemasang=e),showButtonBar:"",showIcon:"",dateFormat:"yy-mm-dd",class:"text-base text-color surface-overlay surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),be,(0,o.QD)("div",ge,[ye,(0,o.K2)(d,{id:"namainstaller",modelValue:s.formCopy.attributes.namainstallerpemutusan,"onUpdate:modelValue":t[23]||(t[23]=e=>s.formCopy.attributes.namainstallerpemutusan=e),class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,o.QD)("div",he,[xe,(0,o.K2)(f,{id:"serialnumber",modelValue:s.formCopy.attributes.tglPemutusan,"onUpdate:modelValue":t[24]||(t[24]=e=>s.formCopy.attributes.tglPemutusan=e),showButtonBar:"",showIcon:"",dateFormat:"yy-mm-dd",class:"text-base text-color surface-overlay surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),Ce,(0,o.QD)("div",De,[ve,(0,o.K2)(d,{id:"namainstaller",modelValue:s.formCopy.attributes.tenantrelation,"onUpdate:modelValue":t[25]||(t[25]=e=>s.formCopy.attributes.tenantrelation=e),class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,o.QD)("div",Te,[we,(0,o.K2)(d,{id:"namainstaller",modelValue:s.formCopy.attributes.it,"onUpdate:modelValue":t[26]||(t[26]=e=>s.formCopy.attributes.it=e),class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,o.QD)("div",Ve,[Qe,(0,o.K2)(d,{id:"namainstaller",modelValue:s.formCopy.attributes.management,"onUpdate:modelValue":t[27]||(t[27]=e=>s.formCopy.attributes.management=e),class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,o.QD)("div",ke,[Fe,(0,o.K2)(f,{modelValue:s.formCopy.attributes.tglPrint,"onUpdate:modelValue":t[28]||(t[28]=e=>s.formCopy.attributes.tglPrint=e),showButtonBar:"",showIcon:"",dateFormat:"yy-mm-dd",class:"text-base text-color surface-overlay surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])])])],512)])),_:1},8,["visible"]),(0,o.K2)(g,{visible:r.imageDialogVisible,closable:!1,style:{width:"50vh"}},{header:(0,o.Ql)((()=>[(0,o.K2)(n,{label:"Print",icon:"pi pi-print",class:"button-rounded button-text mr-auto button-secondary",onClick:s.printImage},null,8,["onClick"]),(0,o.K2)(n,{label:"Close",icon:"pi pi-times",class:"button-rounded button-text ml-auto button-secondary",onClick:s.hideImageDialog},null,8,["onClick"])])),default:(0,o.Ql)((()=>[(0,o.QD)("img",{src:r.imageSrc,alt:"Image Preview",style:{"max-width":"100%","max-height":"100%"}},null,8,Ie)])),_:1},8,["visible"])],64)}a(2168),a(5104),a(8312);var Me=a(100),Ee=a(3952),Re=a(8830),Be=a(5556),Ne=a(7016),Ae=a(6592),Le=a(2332),Oe=a(1340),He=a(3592),$e=a.p+"assets/pdf/InternetMarchand.pdf";let ze=new c.c;var _e={components:{Dialog:Me.c,Button:Re.c,ConfirmDialog:Ee.c,InputText:p.c,Textarea:Be.c,Calendar:Le.c,InternetRate:Oe.c,ToggleButton:Ne.c,InputNumber:Ae.c,Dropdown:f.c},props:["displayModal","form","refreshList","action","internetRate"],res:null,data(){return{options:["False","True"],statusoptions:["Batal","Aktif"],imageDialogVisible:!1,tipeformoptions:["Pemasangan","Pemutusan"],imageSrc:""}},methods:{viewKTP(){this.formCopy.attributes.imgurl?this.openImagePopup():this.$toast.add({severity:"warn",summary:"No KTP",detail:"The KTP image is not available.",life:3e3})},printImage(){const e=new Image;e.onload=()=>{const t=document.createElement("canvas"),a=t.getContext("2d");t.width=e.width,t.height=e.height,a.drawImage(e,0,0);const o=t.toDataURL(),l=window.open("","_blank");l.document.write("<html><head><title>Print Image</title>"),l.document.write("<style>@media print { img { width: 50%; height: auto; } }</style>"),l.document.write("</head><body>"),l.document.write(`<img src="${o}" onload="window.print();">`),l.document.write("</body></html>"),l.document.close()},e.src=`/img/MarchandImages/${this.formCopy.attributes.imgurl}`},openImagePopup(){this.imageSrc=`/img/MarchandImages/${this.formCopy.attributes.imgurl}`,this.imageDialogVisible=!0},hideImageDialog(){this.imageDialogVisible=!1},formatPrice(e){const t=e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");return`${t},-`},async fillForm(){try{let e;e=await fetch($e).then((e=>e.arrayBuffer()));const t=await He.PDFDocument.load(e),a=t.getForm(),o=JSON.stringify(this.form.id),l=this.form.attributes.tglPemasang,[r,s,n]=l.split("-"),i=this.form.attributes.tglPemutusan,[d,u,m]=i.split("-"),c=this.form.attributes.tglPrint,[p,f,b]=c.split("-"),g=this.form.attributes.alamatpemasang,y=this.form.attributes.alamattagihan,h=30;let x,C,D,v;g.length<=h?(x=g,C=""):(x=g.substr(0,h),C=g.substr(h,h)),y.length<=h?(D=y,v=""):(D=y.substr(0,h),v=y.substr(h,h)),a.getTextField("no").setText(o),a.getTextField("namalengkap").setText(this.form.attributes.namalengkap.toUpperCase()??""),a.getTextField("ktp").setText(this.form.attributes.notelp.toUpperCase()??""),a.getTextField("hp").setText(this.form.attributes.noktp.toUpperCase()??""),a.getTextField("alamat").setText(x.toUpperCase()??""),a.getTextField("alamat1").setText(C.toUpperCase()??""),a.getTextField("alamat2").setText(D.toUpperCase()??""),a.getTextField("alamat3").setText(v.toUpperCase()??""),a.getTextField("kel").setText(this.form.attributes.kelpemasang.toUpperCase()??""),a.getTextField("kec").setText(this.form.attributes.kecpemasang.toUpperCase()??""),a.getTextField("pos").setText(this.form.attributes.pospemasang.toUpperCase()??""),a.getTextField("kel2").setText(this.form.attributes.keltagihan.toUpperCase()??""),a.getTextField("kec2").setText(this.form.attributes.kectagihan.toUpperCase()??""),a.getTextField("pos2").setText(this.form.attributes.postagihan.toUpperCase()??""),a.getTextField("email").setText(this.form.attributes.email.toUpperCase()??"");const T=a.getCheckBox("check"),w=a.getCheckBox("check1"),V=a.getCheckBox("check2");a.getTextField("install").setText("150,000,-");const Q=a.getTextField("premie10"),k=a.getTextField("premie15");a.getTextField("modem").setText(this.form.attributes.merekModem.toUpperCase()??""),a.getTextField("serial").setText(this.form.attributes.serialnumber.toUpperCase()??""),a.getTextField("installer").setText(this.form.attributes.namainstaller.toUpperCase()??""),a.getTextField("year").setText(r??""),a.getTextField("month").setText(s??""),a.getTextField("day").setText(n??""),a.getTextField("installer1").setText(this.form.attributes.namainstallerpemutusan.toUpperCase()??""),a.getTextField("year2").setText(d??""),a.getTextField("month2").setText(u??""),a.getTextField("day2").setText(m??""),a.getTextField("year3").setText(p??""),a.getTextField("month3").setText(f??""),a.getTextField("day3").setText(b??""),a.getTextField("bintaro").setText("BINTARO"),a.getTextField("tenant").setText(this.form.attributes.tenantrelation.toUpperCase()??""),a.getTextField("it").setText(this.form.attributes.it.toUpperCase()??""),a.getTextField("management").setText(this.form.attributes.management.toUpperCase()??""),a.getTextField("namalengkap1").setText(this.form.attributes.namalengkap.toUpperCase()??"");const F=this.formatPrice(this.form.attributes.internetID.data.attributes.price);1==this.form.attributes.instalasi&&T.check(),"1"==this.form.attributes.internetID.data.id?(w.check(),Q.setText(F)):(V.check(),k.setText(F));const U=await t.save(),K=new Blob([U],{type:"application/pdf"}),P=URL.createObjectURL(K);window.open(P,"_blank"),URL.revokeObjectURL(P)}catch(e){console.error("Error while processing PDF:",e)}},handleClose(){this.$emit("update:form",null),this.$emit("update:displayModal",!1),this.imageDialogVisible=!1},async handleSubmit(){try{if(this.formCopy.attributes.tglPemasang){const e=new Date(this.formCopy.attributes.tglPemasang);e.setHours(e.getHours()+7),this.formCopy.attributes.tglPemasang=e.toISOString()}if(this.formCopy.attributes.tglPemutusan){var e=new Date(this.formCopy.attributes.tglPemutusan);e.setHours(e.getHours()+7),this.formCopy.attributes.tglPemutusan=e.toISOString()}if(this.formCopy.attributes.tglPrint){var t=new Date(this.formCopy.attributes.tglPrint);t.setHours(t.getHours()+7),this.formCopy.attributes.tglPrint=t.toISOString()}const a=this.formCopy.attributes.internetID.data.id;let o={...this.formCopy.attributes,internetID:{id:a}},l=this.formCopy.id,r=null,s={data:o};r=await ze.internetMarchand.updateByID(l,s),this.handleClose(),this.refreshList(),this.$toast.add({severity:"success",summary:"Form Update Success",detail:`Form #${r.data.data.id} has been saved`,life:3e3})}catch(a){console.error("Error while saving form:",a)}}},computed:{formCopy(){return{...this.form}},computedPrice:{get(){return this.form.attributes.internetID&&this.form.attributes.internetID.data?this.formCopy.attributes.internetID.data.attributes.price:null},set(e){this.formCopy.attributes.internetID&&(this.formCopy.attributes.internetID.data.attributes.price=null===e?null:e)}}}},je=a(4100);const We=(0,je.c)(_e,[["render",Se]]);var Ye=We,Je=a(884),qe=a.n(Je),Ge=new c.c,Xe={components:{DataTable:u.c,Column:m.c,InputText:p.c,formModal:Ye,StatusTag:g.c,Dropdown:f.c},data(){return{formData:null,internetRate:null,action:null,selectedInternet:null,selectedForm:null,role:null,displayModal:!1,statuses:["Batal","Aktif"],statusfilter:["Semua","Batal","Aktif"],selectedStatus:"Semua",filters:{global:{value:null,matchMode:b.yI.CONTAINS},"attributes.status":{value:null,matchMode:b.yI.EQUALS}}}},created(){this.getAllForms()},watch:{selectedStatus(e){"Semua"!==e?(this.filters["attributes.status"].value=e,this.getAllForms()):(this.filters["attributes.status"].value=null,this.getAllForms())}},methods:{async getAllForms(){try{let e=qe().stringify({populate:"internetID"}),t=await Ge.internetMarchand.findAll(e);this.formData=t.data.data}catch(e){console.log(e)}},async showModal(e,t){this.action=e,this.selectedForm=t,this.displayModal=!0}}};const Ze=(0,je.c)(Xe,[["render",d]]);var et=Ze}}]);
//# sourceMappingURL=888.js.map