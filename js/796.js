"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[796],{420:function(e,s,t){t.r(s),t.d(s,{default:function(){return k}});var i=t(4108),a=t(9096),n=t.p+"img/logochl.png";const l=e=>((0,i.ED)("data-v-f2d81be2"),e=e(),(0,i.ii)(),e),o={class:"flex align-items-center justify-content-center flex-wrap bg-ggi-red",style:{height:"100vh"}},r=l((()=>(0,i.QD)("div",{class:"flex col-12 align-items-center justify-content-center flex-wrap"},[(0,i.QD)("div",{class:"grid"},[(0,i.QD)("div",{class:"col-12"},[(0,i.QD)("h1",{class:"text-white text-color flex-wrap"},"Welcome to PT. Griya Gardenia Indah")])])],-1))),c={class:"flex col-12 align-items-center justify-content-center flex-wrap"},d={class:"p-fluid grid-nogutter"},u={class:"field col"},g={class:"field col"},m={class:"flex justify-content-end align-items-center grid-nogutter"},p={class:"col-4"},f=l((()=>(0,i.QD)("div",{class:"flex align-items-center justify-content-center flex-wrap"},[(0,i.QD)("div",{class:"flex col-12 align-items-center justify-content-center"},[(0,i.QD)("h1",null,"Developed By:")]),(0,i.QD)("div",{class:"flex col-12 align-items-center justify-content-center"},[(0,i.QD)("img",{src:n,class:"login-logo"})])],-1)));function h(e,s,t,n,l,h){const D=(0,i.E1)("InputText"),w=(0,i.E1)("Password"),y=(0,i.E1)("Button"),v=(0,i.E1)("Card");return(0,i.Wz)(),(0,i.An)("div",o,[r,(0,i.QD)("div",c,[(0,i.K2)(v,{class:"col-3"},{content:(0,i.Ql)((()=>[(0,i.QD)("form",null,[(0,i.QD)("div",d,[(0,i.QD)("div",u,[(0,i.K2)(D,{placeholder:"Username",type:"text",modelValue:l.username,"onUpdate:modelValue":s[0]||(s[0]=e=>l.username=e),class:"login-input"},null,8,["modelValue"])]),(0,i.QD)("div",g,[(0,i.K2)(w,{modelValue:l.password,"onUpdate:modelValue":s[1]||(s[1]=e=>l.password=e),feedback:!1,toggleMask:!0,placeholder:"Password",class:"login-input"},null,8,["modelValue"])]),(0,i.QD)("div",m,[(0,i.QD)("div",p,[(0,i.K2)(y,{type:"submit",label:l.isLoggedIn?"Successful":"Login",icon:l.isLoading?"pi pi-spin pi-spinner":"pi pi-sign-in",onClick:h.handleLogin,disabled:l.isLoading,class:(0,a.WN)({"p-button-success":l.isLoggedIn})},null,8,["label","icon","onClick","disabled","class"])])])])])])),_:1})]),f])}t(3248);var D=t(6960),w=t(4434),y=t(8830),v=t(3716),L=t(2340);let x=new L.c;var Q={components:{Card:v.c,InputText:D.c,Password:w.c,Button:y.c},data(){return{username:null,password:null,isLoading:!1,isLoggedIn:!1}},methods:{async handleLogin(){this.isLoading=!0;try{let e=await x.user.login({identifier:this.username,password:this.password}),s=await x.user.findByID(e.data.user.id),t=new Date;e.data.user.loginDateNew&&(e.data.user.loginDate=e.data.user.loginDateNew);const i={weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",timeZone:"Asia/Jakarta",locale:"id-ID"},a=t.toLocaleDateString("id-ID",i);e.data.user.loginDateNew=a,console.log();const n=e.data.user;await x.user.updateByID(n.id,n),this.isLoading=!1,this.isLoggedIn=!0,setTimeout((()=>{this.$store.commit("adminDataInit",s.data.id_project),this.$store.commit("login",e.data),this.$router.push({name:"Home"})}),1e3),1==this.isLoggedIn&&this.$toast.add({severity:"success",summary:"Login Successful",detail:"Thank you",life:1e3})}catch(e){console.log(e),this.isLoading=!1,400===e.response.status?this.$toast.add({severity:"error",summary:"Login error",detail:"Incorrect username or password",life:2e3}):this.$toast.add({severity:"error",summary:"Login error",detail:e.message,life:2e3})}}}},I=t(4100);const b=(0,I.c)(Q,[["render",h],["__scopeId","data-v-f2d81be2"]]);var k=b}}]);
//# sourceMappingURL=796.js.map