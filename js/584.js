"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[584],{3740:function(e,t,a){a.d(t,{c:function(){return d}});var o=a(1368),l=a(7988),r=a(9435),s={root:"p-blockui-container"},i=r.c.extend({name:"blockui",classes:s}),n=a(4108),u={name:"BaseBlockUI",extends:l.c,props:{blocked:{type:Boolean,default:!1},fullScreen:{type:Boolean,default:!1},baseZIndex:{type:Number,default:0},autoZIndex:{type:Boolean,default:!0}},style:i,provide:function(){return{$parentInstance:this}}},d={name:"BlockUI",extends:u,emits:["block","unblock"],mask:null,data:function(){return{isBlocked:!1}},watch:{blocked:function(e){!0===e?this.block():this.unblock()}},mounted:function(){this.blocked&&this.block()},methods:{block:function(){var e="p-blockui p-component-overlay p-component-overlay-enter";this.fullScreen?(e+=" p-blockui-document",this.mask=o.kP.createElement("div",{style:{position:"fixed",top:"0",left:"0",width:"100%",height:"100%"},class:!this.isUnstyled&&e,"p-bind":this.ptm("mask")}),document.body.appendChild(this.mask),o.kP.blockBodyScroll(),document.activeElement.blur()):(this.mask=o.kP.createElement("div",{style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%"},class:!this.isUnstyled&&e,"p-bind":this.ptm("mask")}),this.$refs.container.appendChild(this.mask)),this.autoZIndex&&o.eI.set("modal",this.mask,this.baseZIndex+this.$primevue.config.zIndex.modal),this.isBlocked=!0,this.$emit("block")},unblock:function(){var e=this;!this.isUnstyled&&o.kP.addClass(this.mask,"p-component-overlay-leave"),o.kP.hasCSSAnimation(this.mask)>0?this.mask.addEventListener("animationend",(function(){e.removeMask()})):this.removeMask()},removeMask:function(){o.eI.clear(this.mask),this.fullScreen?(document.body.removeChild(this.mask),o.kP.unblockBodyScroll()):this.$refs.container.removeChild(this.mask),this.isBlocked=!1,this.$emit("unblock")}}},c=["aria-busy"];function m(e,t,a,o,l,r){return(0,n.Wz)(),(0,n.An)("div",(0,n.Gu)({ref:"container",class:e.cx("root"),"aria-busy":l.isBlocked},e.ptm("root")),[(0,n.oF)(e.$slots,"default")],16,c)}d.render=m},5556:function(e,t,a){a.d(t,{c:function(){return u}});var o=a(7988),l=a(9435),r={root:function(e){var t=e.instance,a=e.props;return["p-inputtextarea p-inputtext p-component",{"p-filled":t.filled,"p-inputtextarea-resizable ":a.autoResize,"p-invalid":a.invalid,"p-variant-filled":a.variant?"filled"===a.variant:"filled"===t.$primevue.config.inputStyle}]}},s=l.c.extend({name:"textarea",classes:r}),i=a(4108),n={name:"BaseTextarea",extends:o.c,props:{modelValue:null,autoResize:Boolean,invalid:{type:Boolean,default:!1},variant:{type:String,default:null}},style:s,provide:function(){return{$parentInstance:this}}},u={name:"Textarea",extends:n,emits:["update:modelValue"],mounted:function(){this.$el.offsetParent&&this.autoResize&&this.resize()},updated:function(){this.$el.offsetParent&&this.autoResize&&this.resize()},methods:{resize:function(){this.$el.style.height="auto",this.$el.style.height=this.$el.scrollHeight+"px",parseFloat(this.$el.style.height)>=parseFloat(this.$el.style.maxHeight)?(this.$el.style.overflowY="scroll",this.$el.style.height=this.$el.style.maxHeight):this.$el.style.overflow="hidden"},onInput:function(e){this.autoResize&&this.resize(),this.$emit("update:modelValue",e.target.value)}},computed:{filled:function(){return null!=this.modelValue&&this.modelValue.toString().length>0},ptmParams:function(){return{context:{disabled:this.$attrs.disabled||""===this.$attrs.disabled}}}}},d=["value"];function c(e,t,a,o,l,r){return(0,i.Wz)(),(0,i.An)("textarea",(0,i.Gu)({class:e.cx("root"),value:e.modelValue,onInput:t[0]||(t[0]=function(){return r.onInput&&r.onInput.apply(r,arguments)})},e.ptm("root",r.ptmParams)),null,16,d)}u.render=c},584:function(e,t,a){a.r(t),a.d(t,{default:function(){return ze}});var o=a(4108),l=a(9096);const r={class:"col-12 offset-10"},s=(0,o.QD)("div",{class:"flex justify-content-between align-items-center"},[(0,o.QD)("h1",{class:"text-ggi-red"},"Panel Form - Data Pemilik / Penghuni / Warga Pindah")],-1),i={class:"flex justify-content-start mb-4"},n={class:"p-input-icon-left"},u=(0,o.QD)("i",{class:"pi pi-search"},null,-1);function d(e,t,a,d,c,m){const p=(0,o.E1)("Button"),f=(0,o.E1)("InputText"),b=(0,o.E1)("Dropdown"),h=(0,o.E1)("BlockUI"),g=(0,o.E1)("Column"),y=(0,o.E1)("StatusTag"),x=(0,o.E1)("DataTable"),k=(0,o.E1)("formModal");return(0,o.Wz)(),(0,o.An)("div",r,[s,(0,o.QD)("div",i,[(0,o.QD)("span",null,[(0,o.K2)(p,{icon:"pi pi-external-link",label:"Export",onClick:t[0]||(t[0]=e=>m.exportCSV(e)),class:"mr-2"})]),(0,o.QD)("span",n,[u,(0,o.K2)(f,{modelValue:c.filters["global"].value,"onUpdate:modelValue":t[1]||(t[1]=e=>c.filters["global"].value=e),placeholder:"Keyword Search",class:"w-10rem"},null,8,["modelValue"])]),(0,o.QD)("span",null,[(0,o.K2)(b,{modelValue:c.selectedStatus,"onUpdate:modelValue":t[2]||(t[2]=e=>c.selectedStatus=e),options:c.statusfilter,placeholder:"Status",class:"w-full md:w-9rem ml-2"},null,8,["modelValue","options"])]),(0,o.K2)(h,{blocked:"superadmin"!=this.role},{default:(0,o.Ql)((()=>[(0,o.QD)("span",null,[(0,o.K2)(b,{modelValue:c.selectedProject,"onUpdate:modelValue":t[3]||(t[3]=e=>c.selectedProject=e),options:c.projectfilter,placeholder:"Project",class:"w-full md:w-9rem ml-2"},null,8,["modelValue","options"])])])),_:1},8,["blocked"])]),(0,o.K2)(x,{ref:"dt",filters:c.filters,value:c.formData,selectionMode:"single",onRowSelect:t[4]||(t[4]=e=>m.showModal("edit",e.data)),responsiveLayout:"scroll",sortField:"id",sortOrder:1,paginator:!0,rows:15,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown",rowsPerPageOptions:[15,20,30],removableSort:"",dataKey:"id","onUpdate:filters":t[5]||(t[5]=e=>c.filters=e),filterDisplay:"row"},{default:(0,o.Ql)((()=>[(0,o.K2)(g,{field:"attributes.formid",header:"Form ID"}),(0,o.K2)(g,{field:"attributes.namalengkap",header:"Nama Lengkap"}),(0,o.K2)(g,{field:"attributes.blok",header:"Blok/No.Unit"}),(0,o.K2)(g,{field:"attributes.status",header:"Status"},{body:(0,o.Ql)((e=>[(0,o.K2)(y,{modelValue:e.data.attributes.status,"onUpdate:modelValue":t=>e.data.attributes.status=t},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,o.K2)(g,{field:"attributes.project",header:"Project"},{body:(0,o.Ql)((e=>[(0,o.QD)("span",null,(0,l.WA)(m.getStatusText(e.data.attributes.project)),1)])),_:1})])),_:1},8,["filters","value"]),(0,o.K2)(k,{displayModal:c.displayModal,"onUpdate:displayModal":t[6]||(t[6]=e=>c.displayModal=e),form:c.selectedForm,"onUpdate:form":t[7]||(t[7]=e=>c.selectedForm=e),refreshList:m.getAllForms,action:c.action},null,8,["displayModal","form","refreshList","action"])])}a(3248),a(2168),a(5104),a(8312);var c=a(4432),m=a(5160),p=a(2340),f=a(9140),b=a(3740),h=a(8830),g=a(1147),y=a(6960),x=a(6716),k=a(8331);const v={class:"p-m-0"},D={class:"text-ggi-red"},C={ref:"form"},w={class:"formgrid grid"},V=(0,o.QD)("div",{class:"field col-12 md:col-9"},[(0,o.QD)("h3",{class:"text-base text-color surface-overlay surface-border border-round appearance-none outline-none focus:border-primary w-full"}," Informasi Data Pemilik/Penghuni/Warga Pindah")],-1),L={class:"field col-12 md:col-3"},Q=(0,o.QD)("label",null,"Status",-1),T={class:"field col-12 md:col-3"},F=(0,o.QD)("label",null,[(0,o.QD)("span",null,"Nama Lengkap:")],-1),I={class:"field col-12 md:col-3"},P=(0,o.QD)("label",null,[(0,o.QD)("span",null,"Tempat Lahir:")],-1),K={class:"field col-12 md:col-3"},S=(0,o.QD)("label",null,[(0,o.QD)("span",null,"Pekerjaan")],-1),B={class:"field col-12 md:col-3"},U=(0,o.QD)("label",null,"Tanggal Lahir:",-1),j={class:"field col-12 md:col-12"},A=(0,o.QD)("label",null,"Alamat",-1),$={class:"field col-12 md:col-6"},E=(0,o.QD)("label",null,"No Telp/HP",-1),M={class:"field col-12 md:col-6"},N=(0,o.QD)("label",null,[(0,o.QD)("span",null,"Email:")],-1),z=(0,o.QD)("div",{class:"field col-12 md:col-4"},[(0,o.QD)("h3",{class:"text-base text-color surface-overlay surface-border border-round appearance-none outline-none focus:border-primary w-full"}," Data Keluarga")],-1),R=(0,o.QD)("div",{class:"field col-12 md:col-4"},[(0,o.QD)("h3",{class:"flex flex-wrap justify-content-center text-base text-color surface-overlay surface-border border-round appearance-none outline-none focus:border-primary w-full"}," Nama")],-1),O=(0,o.QD)("div",{class:"field col-12 md:col-4"},[(0,o.QD)("h3",{class:"flex flex-wrap justify-content-center text-base text-color surface-overlay surface-border border-round appearance-none outline-none focus:border-primary w-full"}," Tanggal Lahir")],-1),H=(0,o.QD)("div",{class:"field col-12 md:col-4"},[(0,o.QD)("label",null,[(0,o.QD)("span",null,"Suami")])],-1),W={class:"field col-12 md:col-4"},_={class:"field col-12 md:col-4"},Z=(0,o.QD)("div",{class:"field col-12 md:col-4"},[(0,o.QD)("label",null,[(0,o.QD)("span",null,"Istri")])],-1),G={class:"field col-12 md:col-4"},J={class:"field col-12 md:col-4"},Y=(0,o.QD)("div",{class:"field col-12 md:col-4"},[(0,o.QD)("label",null,[(0,o.QD)("span",null,"Anak - 1")])],-1),q={class:"field col-12 md:col-4"},X={class:"field col-12 md:col-4"},ee=(0,o.QD)("div",{class:"field col-12 md:col-4"},[(0,o.QD)("label",null,[(0,o.QD)("span",null,"Anak - 2")])],-1),te={class:"field col-12 md:col-4"},ae={class:"field col-12 md:col-4"},oe=(0,o.QD)("div",{class:"field col-12 md:col-4"},[(0,o.QD)("label",null,[(0,o.QD)("span",null,"Anak - 3")])],-1),le={class:"field col-12 md:col-4"},re={class:"field col-12 md:col-4"},se=(0,o.QD)("div",{class:"field col-12 md:col-4"},[(0,o.QD)("label",null,[(0,o.QD)("span",null,"Anak - 4")])],-1),ie={class:"field col-12 md:col-4"},ne={class:"field col-12 md:col-4"},ue={class:"field col-12 md:col-6"},de=(0,o.QD)("label",null,"Blok/No.Unit",-1),ce={class:"field col-12 md:col-12"},me=(0,o.QD)("label",null,"Nama Pemilik Rumah:",-1),pe={class:"field col-12 md:col-12"},fe=(0,o.QD)("label",null,"Alamat Rumah Tujuan",-1),be={class:"field col-12 md:col-6"},he=(0,o.QD)("label",null,"Tanggal Pindah:",-1),ge={class:"field col-12 md:col-6"},ye=(0,o.QD)("label",null,"Nama Estate Management",-1),xe={class:"flex justify-content-center gap-3"},ke={class:"flex justify-content-between flex-wrap"},ve={class:"flex"},De={class:"flex"},Ce=["src"];function we(e,t,a,r,s,i){const n=(0,o.E1)("Button"),u=(0,o.E1)("Dropdown"),d=(0,o.E1)("InputText"),c=(0,o.E1)("Calendar"),m=(0,o.E1)("Textarea"),p=(0,o.E1)("InputNumber"),f=(0,o.E1)("ConfirmDialog"),b=(0,o.E1)("Dialog");return(0,o.Wz)(),(0,o.An)(o.ae,null,[(0,o.K2)(b,{visible:a.displayModal,modal:!0,closable:!1,style:{width:"90vh"}},{header:(0,o.Ql)((()=>[(0,o.QD)("h3",v,[(0,o.QD)("span",D,"Edit Customer Form Number # "+(0,l.WA)(a.form.id),1)]),(0,o.K2)(n,{label:"Close",icon:"pi pi-times",class:"button-rounded button-text ml-auto button-secondary",onClick:i.handleClose},null,8,["onClick"])])),footer:(0,o.Ql)((()=>[(0,o.QD)("div",ke,[(0,o.QD)("div",ve,[(0,o.K2)(n,{label:"Print",icon:"pi pi-print",onClick:t[27]||(t[27]=e=>i.fillForm())})]),(0,o.QD)("div",De,[(0,o.K2)(n,{label:"edit"==a.action?"Save":"Add Document",icon:"edit"==a.action?"pi pi-save":"pi pi-plus",onClick:t[28]||(t[28]=e=>i.handleSubmit(a.action))},null,8,["label","icon"])])]),(0,o.K2)(f)])),default:(0,o.Ql)((()=>[(0,o.QD)("form",C,[(0,o.QD)("div",w,[V,(0,o.QD)("div",L,[Q,(0,o.K2)(u,{modelValue:i.formCopy.attributes.status,"onUpdate:modelValue":t[0]||(t[0]=e=>i.formCopy.attributes.status=e),options:s.statusoptions,class:"text-base text-color surface-overlay surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue","options"])]),(0,o.QD)("div",T,[F,(0,o.K2)(d,{modelValue:i.formCopy.attributes.namalengkap,"onUpdate:modelValue":t[1]||(t[1]=e=>i.formCopy.attributes.namalengkap=e),class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,o.QD)("div",I,[P,(0,o.K2)(d,{modelValue:i.formCopy.attributes.tempat,"onUpdate:modelValue":t[2]||(t[2]=e=>i.formCopy.attributes.tempat=e),class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,o.QD)("div",K,[S,(0,o.K2)(d,{modelValue:i.formCopy.attributes.pekerjaan,"onUpdate:modelValue":t[3]||(t[3]=e=>i.formCopy.attributes.pekerjaan=e),class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,o.QD)("div",B,[U,(0,o.K2)(c,{modelValue:i.formCopy.attributes.tglLahir,"onUpdate:modelValue":t[4]||(t[4]=e=>i.formCopy.attributes.tglLahir=e),showButtonBar:"",showIcon:"",dateFormat:"yy-mm-dd",class:"text-base text-color surface-overlay surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,o.QD)("div",j,[A,(0,o.K2)(m,{autoResize:"",rows:"2",modelValue:i.formCopy.attributes.alamat,"onUpdate:modelValue":t[5]||(t[5]=e=>i.formCopy.attributes.alamat=e),class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,o.QD)("div",$,[E,(0,o.K2)(p,{modelValue:i.formCopy.attributes.notelp,"onUpdate:modelValue":t[6]||(t[6]=e=>i.formCopy.attributes.notelp=e),useGrouping:!1,class:"text-base text-color surface-overlay surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,o.QD)("div",M,[N,(0,o.K2)(d,{modelValue:i.formCopy.attributes.email,"onUpdate:modelValue":t[7]||(t[7]=e=>i.formCopy.attributes.email=e),class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),z,R,O,H,(0,o.QD)("div",W,[(0,o.K2)(d,{modelValue:i.formCopy.attributes.suami,"onUpdate:modelValue":t[8]||(t[8]=e=>i.formCopy.attributes.suami=e),class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,o.QD)("div",_,[(0,o.K2)(c,{modelValue:i.formCopy.attributes.tglLahir1,"onUpdate:modelValue":t[9]||(t[9]=e=>i.formCopy.attributes.tglLahir1=e),showButtonBar:"",showIcon:"",dateFormat:"yy-mm-dd",class:"text-base text-color surface-overlay surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),Z,(0,o.QD)("div",G,[(0,o.K2)(d,{modelValue:i.formCopy.attributes.istri,"onUpdate:modelValue":t[10]||(t[10]=e=>i.formCopy.attributes.istri=e),class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,o.QD)("div",J,[(0,o.K2)(c,{modelValue:i.formCopy.attributes.tglLahir2,"onUpdate:modelValue":t[11]||(t[11]=e=>i.formCopy.attributes.tglLahir2=e),showButtonBar:"",showIcon:"",dateFormat:"yy-mm-dd",class:"text-base text-color surface-overlay surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),Y,(0,o.QD)("div",q,[(0,o.K2)(d,{modelValue:i.formCopy.attributes.anak,"onUpdate:modelValue":t[12]||(t[12]=e=>i.formCopy.attributes.anak=e),class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,o.QD)("div",X,[(0,o.K2)(c,{modelValue:i.formCopy.attributes.tglLahir3,"onUpdate:modelValue":t[13]||(t[13]=e=>i.formCopy.attributes.tglLahir3=e),showButtonBar:"",showIcon:"",dateFormat:"yy-mm-dd",class:"text-base text-color surface-overlay surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),ee,(0,o.QD)("div",te,[(0,o.K2)(d,{modelValue:i.formCopy.attributes.anak1,"onUpdate:modelValue":t[14]||(t[14]=e=>i.formCopy.attributes.anak1=e),class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,o.QD)("div",ae,[(0,o.K2)(c,{modelValue:i.formCopy.attributes.tglLahir4,"onUpdate:modelValue":t[15]||(t[15]=e=>i.formCopy.attributes.tglLahir4=e),showButtonBar:"",showIcon:"",dateFormat:"yy-mm-dd",class:"text-base text-color surface-overlay surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),oe,(0,o.QD)("div",le,[(0,o.K2)(d,{modelValue:i.formCopy.attributes.anak2,"onUpdate:modelValue":t[16]||(t[16]=e=>i.formCopy.attributes.anak2=e),class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,o.QD)("div",re,[(0,o.K2)(c,{modelValue:i.formCopy.attributes.tglLahir5,"onUpdate:modelValue":t[17]||(t[17]=e=>i.formCopy.attributes.tglLahir5=e),showButtonBar:"",showIcon:"",dateFormat:"yy-mm-dd",class:"text-base text-color surface-overlay surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),se,(0,o.QD)("div",ie,[(0,o.K2)(d,{modelValue:i.formCopy.attributes.anak3,"onUpdate:modelValue":t[18]||(t[18]=e=>i.formCopy.attributes.anak3=e),class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,o.QD)("div",ne,[(0,o.K2)(c,{modelValue:i.formCopy.attributes.tglLahir6,"onUpdate:modelValue":t[19]||(t[19]=e=>i.formCopy.attributes.tglLahir6=e),showButtonBar:"",showIcon:"",dateFormat:"yy-mm-dd",class:"text-base text-color surface-overlay surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,o.QD)("div",ue,[de,(0,o.K2)(d,{modelValue:i.formCopy.attributes.blok,"onUpdate:modelValue":t[20]||(t[20]=e=>i.formCopy.attributes.blok=e),class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,o.QD)("div",ce,[me,(0,o.K2)(d,{modelValue:i.formCopy.attributes.namapemilik,"onUpdate:modelValue":t[21]||(t[21]=e=>i.formCopy.attributes.namapemilik=e),class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,o.QD)("div",pe,[fe,(0,o.K2)(m,{autoResize:"",rows:"2",modelValue:i.formCopy.attributes.alamatrumah,"onUpdate:modelValue":t[22]||(t[22]=e=>i.formCopy.attributes.alamatrumah=e),class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,o.QD)("div",be,[he,(0,o.K2)(c,{modelValue:i.formCopy.attributes.tglPindah,"onUpdate:modelValue":t[23]||(t[23]=e=>i.formCopy.attributes.tglPindah=e),showButtonBar:"",showIcon:"",dateFormat:"yy-mm-dd",class:"text-base text-color surface-overlay surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,o.QD)("div",ge,[ye,(0,o.K2)(d,{modelValue:i.formCopy.attributes.namaadmin,"onUpdate:modelValue":t[24]||(t[24]=e=>i.formCopy.attributes.namaadmin=e),class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])])]),(0,o.QD)("div",xe,[(0,o.K2)(n,{label:"KTP",icon:"pi pi-image",onClick:t[25]||(t[25]=e=>i.viewKTP("ktp"))}),(0,o.K2)(n,{label:"Kartu Keluarga (KK)",icon:"pi pi-image",onClick:t[26]||(t[26]=e=>i.viewKTP("kk"))})])],512)])),_:1},8,["visible"]),(0,o.K2)(b,{visible:s.imageDialogVisible,closable:!1,style:{width:"50vh"}},{header:(0,o.Ql)((()=>["ktp"===s.currentImageType?((0,o.Wz)(),(0,o.Az)(n,{key:0,label:"Print KTP",icon:"pi pi-print",class:"button-rounded button-text mr-auto button-secondary",onClick:t[29]||(t[29]=e=>i.printCurrentImage("ktp"))})):(0,o.g1)("",!0),"kk"===s.currentImageType?((0,o.Wz)(),(0,o.Az)(n,{key:1,label:"Print KK",icon:"pi pi-print",class:"button-rounded button-text mr-auto button-secondary",onClick:t[30]||(t[30]=e=>i.printCurrentImage("kk"))})):(0,o.g1)("",!0),(0,o.K2)(n,{label:"Close",icon:"pi pi-times",class:"button-rounded button-text ml-auto button-secondary",onClick:i.hideImageDialog},null,8,["onClick"])])),default:(0,o.Ql)((()=>[(0,o.QD)("img",{src:s.imageSrc,alt:"Image Preview",style:{"max-width":"100%","max-height":"100%"}},null,8,Ce)])),_:1},8,["visible"])],64)}var Ve=a(100),Le=a(3952),Qe=a(2332),Te=a(6592),Fe=a(3592),Ie=a.p+"assets/pdf/DataPindahMazenta.pdf",Pe=a.p+"assets/pdf/DataPindahBanara.pdf",Ke=a.p+"assets/pdf/DataPindahNaraya.pdf",Se=a(5556);let Be=new p.c;var Ue={components:{Dialog:Ve.c,Button:h.c,ConfirmDialog:Le.c,InputText:y.c,Textarea:Se.c,Calendar:Qe.c,InputNumber:Te.c,Dropdown:f.c},props:["displayModal","form","refreshList","action"],res:null,data(){return{typeOptions:["Rumah","Kavling"],statusoptions:["Batal","Aktif"],imageDialogVisible:!1,imageSrc:"",currentImageType:""}},methods:{viewKTP(e){const t=this.formCopy.attributes[e];t?(this.openImagePopup(t),this.currentImageType=e):this.$toast.add({severity:"warn",summary:"No Image",detail:"The image is not available.",life:3e3})},openImagePopup(e){const t={1:"MazentaImages",2:"BanaraImages",3:"NarayaImages",4:"MarchandImages"},a=this.formCopy.attributes.project,o=t[a];o?(this.imageSrc=`/img/${o}/${e}`,this.imageDialogVisible=!0):console.error("Project not found!")},hideImageDialog(){this.imageDialogVisible=!1},printCurrentImage(e){const t=new Image;t.onload=()=>{const a=document.createElement("canvas"),o=a.getContext("2d");a.width=t.width,a.height=t.height,o.drawImage(t,0,0);const l=a.toDataURL(),r=window.open("","_blank");r.document.write("<html><head><title>Print Image</title>");const s="ktp"===e?"33%":"100%";r.document.write(`<style>@media print { img { width: ${s}; height: auto; } }</style>`),r.document.write("</head><body>"),r.document.write(`<img src="${l}" onload="window.print();">`),r.document.write("</body></html>"),r.document.close()},t.src=this.imageSrc},changeDateFormat(e){const t=["January","February","March","April","May","June","July","August","September","October","November","December"],a=e.split("-");if(3===a.length){const e=a[2],o=t[parseInt(a[1],10)-1],l=a[0];return`${e} ${o} ${l}`}return e},async fillForm(){try{let e,t=this.formCopy.attributes.project,a=x.c.getters.getRole;"mazentaAdmin"!==a&&"superadmin"!==a||1!==t?"banaraAdmin"!==a&&"superadmin"!==a||1!==t?"narayaAdmin"!==a&&"superadmin"!==a||1!==t||(e=await fetch(Ke).then((e=>e.arrayBuffer()))):e=await fetch(Pe).then((e=>e.arrayBuffer())):e=await fetch(Ie).then((e=>e.arrayBuffer()));const o=await Fe.PDFDocument.load(e),l=o.getForm(),r=this.form.attributes.alamat,s=80;let i,n,u;if(r.length<=s)i=r,n="",u="";else{const e=r.lastIndexOf(" ",s);if(i=r.substring(0,e),n=r.substring(e+1,e+s),r.length>e+s){const t=r.indexOf(" ",e+s);-1!==t?(n=r.substring(e+1,t),u=r.substring(t+1)):u=r.substring(e+s+1)}}l.getTextField("namalengkap").setText(this.formCopy.attributes.namalengkap),l.getTextField("alamat1").setText(i),l.getTextField("alamat2").setText(n),l.getTextField("alamat3").setText(u),l.getTextField("pekerjaan").setText(this.formCopy.attributes.pekerjaan??""),l.getTextField("tglLahir").setText(this.formCopy.attributes.tempat+" - "+this.changeDateFormat(this.formCopy.attributes.tglLahir)),l.getTextField("notelp").setText(this.formCopy.attributes.notelp),l.getTextField("email").setText(this.formCopy.attributes.email),l.getTextField("suami").setText(this.formCopy.attributes.suami??""),l.getTextField("istri").setText(this.formCopy.attributes.istri??""),l.getTextField("anak").setText(this.formCopy.attributes.anak??""),l.getTextField("anak1").setText(this.formCopy.attributes.anak1??""),l.getTextField("anak2").setText(this.formCopy.attributes.anak2??""),l.getTextField("anak3").setText(this.formCopy.attributes.anak3??""),l.getTextField("blok").setText(this.formCopy.attributes.blok??""),l.getTextField("tglLahir1").setText(this.changeDateFormat(this.formCopy.attributes.tglLahir1??"")),l.getTextField("tglLahir2").setText(this.changeDateFormat(this.formCopy.attributes.tglLahir2??"")),l.getTextField("tglLahir3").setText(this.changeDateFormat(this.formCopy.attributes.tglLahir3??"")),l.getTextField("tglLahir4").setText(this.changeDateFormat(this.formCopy.attributes.tglLahir4??"")),l.getTextField("tglLahir5").setText(this.changeDateFormat(this.formCopy.attributes.tglLahir5??"")),l.getTextField("tglLahir6").setText(this.changeDateFormat(this.formCopy.attributes.tglLahir6??"")),l.getTextField("namapemilik").setText(this.formCopy.attributes.namapemilik),l.getTextField("tglPindah").setText(this.changeDateFormat(this.formCopy.attributes.tglPindah??"")),l.getTextField("namaadmin").setText(this.formCopy.attributes.namaadmin);const d=this.form.attributes.alamatrumah,c=80;let m,p,f;if(d.length<=c)m=d,p="",f="";else{const e=d.lastIndexOf(" ",c);if(m=d.substring(0,e),p=d.substring(e+1,e+c),d.length>e+c){const t=d.indexOf(" ",e+c);-1!==t?(m=d.substring(e+1,t),p=d.substring(t+1)):f=d.substring(e+c+1)}}l.getTextField("alamat4").setText(m),l.getTextField("alamat5").setText(p),l.getTextField("alamat6").setText(f);const b=await o.save(),h=new Blob([b],{type:"application/pdf"}),g=URL.createObjectURL(h);window.open(g,"_blank"),URL.revokeObjectURL(g)}catch(e){console.error("Error while processing PDF:",e)}},handleClose(){this.$emit("update:form",null),this.$emit("update:displayModal",!1),this.imageDialogVisible=!1},async handleSubmit(){try{const e=new Date(this.formCopy.attributes.tglLahir);this.formCopy.attributes.tglLahir&&(e.setHours(e.getHours()+7),this.formCopy.attributes.tglLahir=e.toISOString());const t=new Date(this.formCopy.attributes.tglLahir1);this.formCopy.attributes.tglLahir1&&(t.setHours(t.getHours()+7),this.formCopy.attributes.tglLahir1=t.toISOString());const a=new Date(this.formCopy.attributes.tglLahir2);this.formCopy.attributes.tglLahir2&&(a.setHours(a.getHours()+7),this.formCopy.attributes.tglLahir2=a.toISOString());const o=new Date(this.formCopy.attributes.tglLahir3);this.formCopy.attributes.tglLahir3&&(o.setHours(o.getHours()+7),this.formCopy.attributes.tglLahir3=o.toISOString());const l=new Date(this.formCopy.attributes.tglLahir4);this.formCopy.attributes.tglLahir4&&(l.setHours(l.getHours()+7),this.formCopy.attributes.tglLahir4=l.toISOString());const r=new Date(this.formCopy.attributes.tglLahir5);this.formCopy.attributes.tglLahir5&&(r.setHours(r.getHours()+7),this.formCopy.attributes.tglLahir5=r.toISOString());const s=new Date(this.formCopy.attributes.tglLahir6);this.formCopy.attributes.tglLahir6&&(s.setHours(s.getHours()+7),this.formCopy.attributes.tglLahir6=s.toISOString());let i={...this.formCopy.attributes},n=this.formCopy.id,u=null,d={data:i};u=await Be.dataPindahForm.updateByID(n,d),this.handleClose(),this.refreshList(),console.log(u),this.$toast.add({severity:"success",summary:"Form Update Success",detail:`Form #${u.data.data.id} has been saved`,life:3e3})}catch(e){console.error("Error while saving form:",e)}}},computed:{formCopy(){return{...this.form}}}},je=a(4100);const Ae=(0,je.c)(Ue,[["render",we]]);var $e=Ae,Ee=new p.c,Me={components:{DataTable:c.c,Column:m.c,InputText:y.c,formModal:$e,Button:h.c,Dropdown:f.c,StatusTag:g.c,BlockUI:b.c},data(){return{formData:null,internetRate:null,action:null,selectedInternet:null,selectedForm:null,role:x.c.getters.getRole,displayModal:!1,statuses:["Batal","Aktif"],statusfilter:["Semua","Batal","Aktif"],selectedStatus:"Semua",projectfilter:["Project","Mazenta","Banara","Naraya"],selectedProject:"Project",filters:{global:{value:null,matchMode:k.yI.CONTAINS},"attributes.status":{value:null,matchMode:k.yI.EQUALS},"attributes.project":{value:null,matchMode:k.yI.EQUALS}}}},created(){this.getAllForms()},watch:{selectedStatus(e){"Semua"!==e?(this.filters["attributes.status"].value=e,this.getAllForms()):(this.filters["attributes.status"].value=null,this.getAllForms())},selectedProject(e){"Project"!==e?("Mazenta"==e&&(this.filters["attributes.project"].value=1),"Banara"==e&&(this.filters["attributes.project"].value=2),"Naraya"==e&&(this.filters["attributes.project"].value=3),this.getAllForms()):(this.filters["attributes.project"].value=null,this.getAllForms())}},methods:{getStatusText(e){switch(e){case 1:return"Mazenta";case 2:return"Banara";case 3:return"Naraya";default:return""}},async getAllForms(){try{let e=await Ee.dataPindahForm.findAll();this.filterInternet(e.data.data)}catch(e){console.log(e)}},filterInternet(e){let t=x.c.getters.getRole;this.formData=e.filter((e=>{const a=e.attributes.project;return"mazentaAdmin"==t?a&&1===a:"banaraAdmin"==t?a&&2===a:"narayaAdmin"==t?a&&3===a:"superadmin"==t?a:void 0}))},exportCSV(){if(!this.formData||0===this.formData.length)return void console.error("No data to export.");const e=[],t={id:"ID",namalengkap:"Nama Lengkap",alamat:"Alamat",pekerjaan:"Pekerjaan",tempat:"Tempat Lahir",tglLahir:"Tanggal Lahir",email:"E-mail",suami:"Nama Suami",tglLahir1:"Tanggal Lahir",istri:"Nama Isri",tglLahir2:"Tanggal Lahir",anak:"Nama Anak-1",tglLahir3:"Tanggal Lahir",anak1:"Nama Anak-2",tglLahir4:"Tanggal Lahir",anak2:"Nama Anak-3",tglLahir5:"Tanggal Lahir",anak3:"Nama Anak-4",tglLahir6:"Tanggal Lahir",namapemilik:"Nama Pemilik Rumah",alamatrumah:"Alamat Rumah Tujuan",tglPindah:"Tanggal Pindah"},a=["id","namalengkap","alamat","pekerjaan","tempat","tglLahir","notelp","email","suami","tglLahir1","istri","tglLahir2","anak","tglLahir3","anak1","tglLahir4","anak2","tglLahir5","anak3","tglLahir6","namapemilik","alamatrumah","tglPindah"],o=a.map((e=>t[e]||e));e.push(o.join(","));for(const i of this.formData){const t=[];for(const e of a){let a="id"===e?i.id:i.attributes&&i.attributes[e]||"";a&&"string"===typeof a&&a.includes(",")&&(a=`"${a}"`),t.push(a)}e.push(t.join(","))}const l=e.join("\n"),r=new Blob([l],{type:"text/csv"}),s=document.createElement("a");s.href=window.URL.createObjectURL(r),s.download="Form Data Pemilik/Penghuni/Warga Pindah Mazenta.csv",s.click()},async showModal(e,t){this.action=e,this.selectedForm=t,this.displayModal=!0}}};const Ne=(0,je.c)(Me,[["render",d]]);var ze=Ne}}]);
//# sourceMappingURL=584.js.map