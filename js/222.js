"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[222],{3740:function(e,t,a){a.d(t,{c:function(){return u}});var o=a(1368),r=a(7988),l=a(9435),s={root:"p-blockui-container"},n=l.c.extend({name:"blockui",classes:s}),i=a(4108),d={name:"BaseBlockUI",extends:r.c,props:{blocked:{type:Boolean,default:!1},fullScreen:{type:Boolean,default:!1},baseZIndex:{type:Number,default:0},autoZIndex:{type:Boolean,default:!0}},style:n,provide:function(){return{$parentInstance:this}}},u={name:"BlockUI",extends:d,emits:["block","unblock"],mask:null,data:function(){return{isBlocked:!1}},watch:{blocked:function(e){!0===e?this.block():this.unblock()}},mounted:function(){this.blocked&&this.block()},methods:{block:function(){var e="p-blockui p-component-overlay p-component-overlay-enter";this.fullScreen?(e+=" p-blockui-document",this.mask=o.kP.createElement("div",{style:{position:"fixed",top:"0",left:"0",width:"100%",height:"100%"},class:!this.isUnstyled&&e,"p-bind":this.ptm("mask")}),document.body.appendChild(this.mask),o.kP.blockBodyScroll(),document.activeElement.blur()):(this.mask=o.kP.createElement("div",{style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%"},class:!this.isUnstyled&&e,"p-bind":this.ptm("mask")}),this.$refs.container.appendChild(this.mask)),this.autoZIndex&&o.eI.set("modal",this.mask,this.baseZIndex+this.$primevue.config.zIndex.modal),this.isBlocked=!0,this.$emit("block")},unblock:function(){var e=this;!this.isUnstyled&&o.kP.addClass(this.mask,"p-component-overlay-leave"),o.kP.hasCSSAnimation(this.mask)>0?this.mask.addEventListener("animationend",(function(){e.removeMask()})):this.removeMask()},removeMask:function(){o.eI.clear(this.mask),this.fullScreen?(document.body.removeChild(this.mask),o.kP.unblockBodyScroll()):this.$refs.container.removeChild(this.mask),this.isBlocked=!1,this.$emit("unblock")}}},m=["aria-busy"];function c(e,t,a,o,r,l){return(0,i.Wz)(),(0,i.An)("div",(0,i.Gu)({ref:"container",class:e.cx("root"),"aria-busy":r.isBlocked},e.ptm("root")),[(0,i.oF)(e.$slots,"default")],16,m)}u.render=c},5222:function(e,t,a){a.r(t),a.d(t,{default:function(){return rt}});var o=a(4108),r=a(9096);const l={class:"col-12 offset-10"},s=(0,o.QD)("div",{class:"flex justify-content-between align-items-center"},[(0,o.QD)("h1",{class:"text-ggi-red"},"Panel Form - Pemasangan & Pemutusan Internet")],-1),n={class:"flex justify-content-start mb-4"},i={class:"p-input-icon-left"},d=(0,o.QD)("i",{class:"pi pi-search"},null,-1);function u(e,t,a,u,m,c){const p=(0,o.E1)("InputText"),f=(0,o.E1)("Dropdown"),b=(0,o.E1)("BlockUI"),h=(0,o.E1)("Column"),g=(0,o.E1)("StatusTag"),y=(0,o.E1)("DataTable"),x=(0,o.E1)("formModal");return(0,o.Wz)(),(0,o.An)("div",l,[s,(0,o.QD)("div",n,[(0,o.QD)("span",i,[d,(0,o.K2)(p,{modelValue:m.filters["global"].value,"onUpdate:modelValue":t[0]||(t[0]=e=>m.filters["global"].value=e),placeholder:"Search",class:"w-10rem"},null,8,["modelValue"])]),(0,o.QD)("span",null,[(0,o.K2)(f,{modelValue:m.selectedStatus,"onUpdate:modelValue":t[1]||(t[1]=e=>m.selectedStatus=e),options:m.statusfilter,placeholder:"Select a City",class:"w-full md:w-9rem ml-2"},null,8,["modelValue","options"])]),(0,o.K2)(b,{blocked:"superadmin"!=this.role},{default:(0,o.Ql)((()=>[(0,o.QD)("span",null,[(0,o.K2)(f,{modelValue:m.selectedProject,"onUpdate:modelValue":t[2]||(t[2]=e=>m.selectedProject=e),options:m.projectfilter,placeholder:"Project",class:"w-full md:w-9rem ml-2"},null,8,["modelValue","options"])])])),_:1},8,["blocked"])]),(0,o.K2)(y,{ref:"dt",filters:m.filters,value:m.formData,selectionMode:"single",onRowSelect:t[3]||(t[3]=e=>c.showModal("edit",e.data)),responsiveLayout:"scroll",sortField:"id",sortOrder:1,paginator:!0,rows:15,rowsPerPageOptions:[15,20,30],removableSort:"",dataKey:"id","onUpdate:filters":t[4]||(t[4]=e=>m.filters=e),filterDisplay:"row"},{default:(0,o.Ql)((()=>[(0,o.K2)(h,{field:"attributes.formid",header:"Form ID"}),(0,o.K2)(h,{field:"attributes.namalengkap",header:"Nama Lengkap"}),(0,o.K2)(h,{field:"attributes.email",header:"Email"}),(0,o.K2)(h,{field:"attributes.noktp",header:"NoKTP"}),(0,o.K2)(h,{field:"attributes.notelp",header:"NoTelp/HP"}),(0,o.K2)(h,{field:"attributes.alamatpemasang",header:"Alamat"}),(0,o.K2)(h,{field:"attributes.tipeform",header:"Tipe Form"}),(0,o.K2)(h,{field:"attributes.status",header:"Status"},{body:(0,o.Ql)((e=>[(0,o.K2)(g,{modelValue:e.data.attributes.status,"onUpdate:modelValue":t=>e.data.attributes.status=t},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,o.K2)(h,{field:"attributes.project",header:"Project"},{body:(0,o.Ql)((e=>[(0,o.QD)("span",null,(0,r.WA)(c.getStatusText(e.data.attributes.project)),1)])),_:1})])),_:1},8,["filters","value"]),(0,o.K2)(x,{displayModal:m.displayModal,"onUpdate:displayModal":t[5]||(t[5]=e=>m.displayModal=e),form:m.selectedForm,"onUpdate:form":t[6]||(t[6]=e=>m.selectedForm=e),refreshList:c.getAllForms,action:m.action},null,8,["displayModal","form","refreshList","action"])])}var m=a(4432),c=a(5160),p=a(2340),f=a(6960),b=a(9140),h=a(8331),g=a(1147),y=a(3740);const x={class:"p-m-0"},C={class:"text-ggi-red"},v={ref:"form"},D={class:"formgrid grid"},k=(0,o.QD)("div",{class:"field col-12 md:col-7"},[(0,o.QD)("h3",{class:"text-base text-color surface-overlay surface-border border-round appearance-none outline-none focus:border-primary w-full"}," Data Pelanggan")],-1),w={class:"field col-12 md:col-3"},T=(0,o.QD)("label",null,[(0,o.QD)("span",null,"Tipe Form")],-1),V={class:"field col-12 md:col-2"},Q=(0,o.QD)("label",null,[(0,o.QD)("span",null,"Status")],-1),I={class:"field col-12 md:col-6"},P=(0,o.QD)("label",null,[(0,o.QD)("span",null,"Nama Lengkap:")],-1),F={class:"field col-12 md:col-6"},U=(0,o.QD)("label",{for:"email"},"Email",-1),K={class:"field col-12 md:col-6"},S=(0,o.QD)("label",{for:"noktp"},"NoKTP",-1),B={class:"field col-12 md:col-6"},M=(0,o.QD)("label",{for:"noktp"},"NoTelp/HP",-1),A={class:"field col-12 md:col-12"},E=(0,o.QD)("label",{for:"alamatpemasang"},"Alamat Pemasang",-1),j={class:"field col-12 md:col-4"},N=(0,o.QD)("label",{for:"kelpemasang"},"Kelurahan Pemasang",-1),R={class:"field col-12 md:col-4"},$=(0,o.QD)("label",{for:"kecpemasang"},"Kecamatan Pemasang",-1),z={class:"field col-12 md:col-4"},L=(0,o.QD)("label",{for:"pospemasang"},"POS Pemasang",-1),O={class:"field col-12 md:col-12"},H=(0,o.QD)("label",{for:"alamattagihan"},"Alamat Tagihan",-1),_={class:"field col-12 md:col-4"},W=(0,o.QD)("label",{for:"keltagihan"},"Kelurahan Tagihan",-1),Z={class:"field col-12 md:col-4"},G=(0,o.QD)("label",{for:"kectagihan"},"Kecamatan Tagihan",-1),J={class:"field col-12 md:col-4"},q=(0,o.QD)("label",{for:"postagihan"},"POS Tagihan",-1),X={class:"field col-12 md:col-3"},Y=(0,o.QD)("label",{for:"instalasi"},"Internet Instalasi",-1),ee={class:"field col-12 md:col-3"},te=(0,o.QD)("label",{for:"postagihan"},"Internet Customer Memilih",-1),ae={class:"field col-12 md:col-3"},oe=(0,o.QD)("label",{for:"internetRate"},"Internet Rate",-1),re={class:"field col-12 md:col-3"},le=(0,o.QD)("label",{for:"postagihan"},"Harga",-1),se=(0,o.QD)("div",{class:"field col-12 md:col-12"},[(0,o.QD)("h3",{class:"text-base text-color surface-overlay surface-border border-round appearance-none outline-none focus:border-primary w-full"}," Admin Form Input")],-1),ne={class:"field col-12 md:col-6"},ie=(0,o.QD)("label",{for:"merekModem"},"Merek Modem/Router",-1),de={class:"field col-12 md:col-6"},ue=(0,o.QD)("label",null,"Serial Number",-1),me=(0,o.QD)("div",{class:"field col-12 md:col-12"},[(0,o.QD)("h3",{class:"text-base text-color surface-overlay surface-border border-round appearance-none outline-none focus:border-primary w-full"}," Infomrasi Pemasangan")],-1),ce={class:"field col-12 md:col-6"},pe=(0,o.QD)("label",{for:"namainstaller"},"Nama Installer",-1),fe={class:"field col-12 md:col-6"},be=(0,o.QD)("label",null,"Tanggal Pemasang",-1),he=(0,o.QD)("div",{class:"field col-12 md:col-12"},[(0,o.QD)("h3",{class:"text-base text-color surface-overlay surface-border border-round appearance-none outline-none focus:border-primary w-full"}," Informasi Pemutusan")],-1),ge={class:"field col-12 md:col-6"},ye=(0,o.QD)("label",{for:"namainstaller"},"Nama Installer",-1),xe={class:"field col-12 md:col-6"},Ce=(0,o.QD)("label",null,"Tanggal Pemutusan",-1),ve=(0,o.QD)("div",{class:"field col-12 md:col-12"},[(0,o.QD)("h3",{class:"text-base text-color surface-overlay surface-border border-round appearance-none outline-none focus:border-primary w-full"}," Informasi Printing")],-1),De={class:"field col-12 md:col-12"},ke=(0,o.QD)("label",null,"Tanggal Print",-1),we={class:"field col-12 md:col-4"},Te=(0,o.QD)("label",{for:"namainstaller"},"Nama Estate Relation",-1),Ve={class:"field col-12 md:col-4"},Qe=(0,o.QD)("label",{for:"namainstaller"},"Nama IT",-1),Ie={class:"field col-12 md:col-4"},Pe=(0,o.QD)("label",{for:"namainstaller"},"Nama Estate Management",-1),Fe={class:"flex justify-content-between flex-wrap"},Ue={class:"flex"},Ke={class:"flex"},Se=["src"];function Be(e,t,a,l,s,n){const i=(0,o.E1)("Button"),d=(0,o.E1)("Dropdown"),u=(0,o.E1)("InputText"),m=(0,o.E1)("Textarea"),c=(0,o.E1)("ToggleButton"),p=(0,o.E1)("InternetRate"),f=(0,o.E1)("InputNumber"),b=(0,o.E1)("Calendar"),h=(0,o.E1)("ConfirmDialog"),g=(0,o.E1)("Dialog");return(0,o.Wz)(),(0,o.An)(o.ae,null,[(0,o.K2)(g,{visible:a.displayModal,modal:!0,closable:!1,style:{width:"90vh"}},{header:(0,o.Ql)((()=>[(0,o.QD)("h3",x,[(0,o.QD)("span",C,"Edit Customer Form Internet Number # "+(0,r.WA)(a.form.id),1)]),(0,o.K2)(i,{label:"Close",icon:"pi pi-times",class:"button-rounded button-text ml-auto button-secondary",onClick:n.handleClose},null,8,["onClick"])])),footer:(0,o.Ql)((()=>[(0,o.QD)("div",Fe,[(0,o.QD)("div",Ue,[(0,o.K2)(i,{label:"Print",icon:"pi pi-print",onClick:t[29]||(t[29]=e=>n.fillForm())}),(0,o.K2)(i,{label:"View KTP",icon:"pi pi-image",onClick:n.viewKTP},null,8,["onClick"])]),(0,o.QD)("div",Ke,[(0,o.K2)(i,{label:"edit"==a.action?"Save":"Add Document",icon:"edit"==a.action?"pi pi-save":"pi pi-plus",onClick:t[30]||(t[30]=e=>n.handleSubmit(a.action))},null,8,["label","icon"])])]),(0,o.K2)(h)])),default:(0,o.Ql)((()=>[(0,o.QD)("form",v,[(0,o.QD)("div",D,[k,(0,o.QD)("div",w,[T,(0,o.K2)(d,{modelValue:n.formCopy.attributes.tipeform,"onUpdate:modelValue":t[0]||(t[0]=e=>n.formCopy.attributes.tipeform=e),options:s.tipeformoptions,class:"text-base text-color surface-overlay surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue","options"])]),(0,o.QD)("div",V,[Q,(0,o.K2)(d,{modelValue:n.formCopy.attributes.status,"onUpdate:modelValue":t[1]||(t[1]=e=>n.formCopy.attributes.status=e),options:s.statusoptions,class:"text-base text-color surface-overlay surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue","options"])]),(0,o.QD)("div",I,[P,(0,o.K2)(u,{id:"namalengkap",modelValue:n.formCopy.attributes.namalengkap,"onUpdate:modelValue":t[2]||(t[2]=e=>n.formCopy.attributes.namalengkap=e),class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,o.QD)("div",F,[U,(0,o.K2)(u,{id:"email",modelValue:n.formCopy.attributes.email,"onUpdate:modelValue":t[3]||(t[3]=e=>n.formCopy.attributes.email=e),class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,o.QD)("div",K,[S,(0,o.K2)(u,{id:"noktp",modelValue:n.formCopy.attributes.noktp,"onUpdate:modelValue":t[4]||(t[4]=e=>n.formCopy.attributes.noktp=e),class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,o.QD)("div",B,[M,(0,o.K2)(u,{id:"noktp",modelValue:n.formCopy.attributes.notelp,"onUpdate:modelValue":t[5]||(t[5]=e=>n.formCopy.attributes.notelp=e),class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,o.QD)("div",A,[E,(0,o.K2)(m,{id:"alamatpemasang",autoResize:"",rows:"2",modelValue:n.formCopy.attributes.alamatpemasang,"onUpdate:modelValue":t[6]||(t[6]=e=>n.formCopy.attributes.alamatpemasang=e),class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,o.QD)("div",j,[N,(0,o.K2)(m,{id:"kelpemasang",autoResize:"",rows:"1",modelValue:n.formCopy.attributes.kelpemasang,"onUpdate:modelValue":t[7]||(t[7]=e=>n.formCopy.attributes.kelpemasang=e),class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,o.QD)("div",R,[$,(0,o.K2)(m,{id:"kecpemasang",autoResize:"",rows:"1",modelValue:n.formCopy.attributes.kecpemasang,"onUpdate:modelValue":t[8]||(t[8]=e=>n.formCopy.attributes.kecpemasang=e),class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,o.QD)("div",z,[L,(0,o.K2)(u,{id:"pospemasang",modelValue:n.formCopy.attributes.pospemasang,"onUpdate:modelValue":t[9]||(t[9]=e=>n.formCopy.attributes.pospemasang=e),class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,o.QD)("div",O,[H,(0,o.K2)(m,{id:"alamattagihan",autoResize:"",rows:"2",modelValue:n.formCopy.attributes.alamattagihan,"onUpdate:modelValue":t[10]||(t[10]=e=>n.formCopy.attributes.alamattagihan=e),class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,o.QD)("div",_,[W,(0,o.K2)(m,{id:"keltagihan",autoResize:"",rows:"1",modelValue:n.formCopy.attributes.keltagihan,"onUpdate:modelValue":t[11]||(t[11]=e=>n.formCopy.attributes.keltagihan=e),class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,o.QD)("div",Z,[G,(0,o.K2)(m,{id:"kectagihan",autoResize:"",rows:"1",modelValue:n.formCopy.attributes.kectagihan,"onUpdate:modelValue":t[12]||(t[12]=e=>n.formCopy.attributes.kectagihan=e),class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,o.QD)("div",J,[q,(0,o.K2)(u,{id:"postagihan",modelValue:n.formCopy.attributes.postagihan,"onUpdate:modelValue":t[13]||(t[13]=e=>n.formCopy.attributes.postagihan=e),class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,o.QD)("div",X,[Y,(0,o.K2)(c,{id:"instalasi",modelValue:n.formCopy.attributes.instalasi,"onUpdate:modelValue":t[14]||(t[14]=e=>n.formCopy.attributes.instalasi=e),class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,o.QD)("div",ee,[te,(0,o.K2)(u,{id:"postagihan",modelValue:n.formCopy.attributes.premie,"onUpdate:modelValue":t[15]||(t[15]=e=>n.formCopy.attributes.premie=e),disabled:"",class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,o.QD)("div",ae,[oe,(0,o.K2)(p,{id:"internetRate",modelValue:n.formCopy.attributes.internetID.data,"onUpdate:modelValue":t[16]||(t[16]=e=>n.formCopy.attributes.internetID.data=e),dataForm:n.formCopy,"onUpdate:dataForm":t[17]||(t[17]=e=>n.formCopy=e),class:"text-base text-color surface-overlay surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue","dataForm"])]),(0,o.QD)("div",re,[le,(0,o.K2)(f,{modelValue:n.computedPrice,"onUpdate:modelValue":t[18]||(t[18]=e=>n.computedPrice=e),disabled:"",class:"text-base text-color surface-overlay surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),se,(0,o.QD)("div",ne,[ie,(0,o.K2)(u,{id:"merekModem",modelValue:n.formCopy.attributes.merekModem,"onUpdate:modelValue":t[19]||(t[19]=e=>n.formCopy.attributes.merekModem=e),class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,o.QD)("div",de,[ue,(0,o.K2)(u,{id:"serialnumber",modelValue:n.formCopy.attributes.serialnumber,"onUpdate:modelValue":t[20]||(t[20]=e=>n.formCopy.attributes.serialnumber=e),class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),me,(0,o.QD)("div",ce,[pe,(0,o.K2)(u,{id:"namainstaller",modelValue:n.formCopy.attributes.namainstaller,"onUpdate:modelValue":t[21]||(t[21]=e=>n.formCopy.attributes.namainstaller=e),class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,o.QD)("div",fe,[be,(0,o.K2)(b,{id:"serialnumber",modelValue:n.formCopy.attributes.tglPemasang,"onUpdate:modelValue":t[22]||(t[22]=e=>n.formCopy.attributes.tglPemasang=e),showIcon:"",showButtonBar:"",dateFormat:"yy-mm-dd",class:"text-base text-color surface-overlay surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),he,(0,o.QD)("div",ge,[ye,(0,o.K2)(u,{id:"namainstaller",modelValue:n.formCopy.attributes.namainstallerpemutusan,"onUpdate:modelValue":t[23]||(t[23]=e=>n.formCopy.attributes.namainstallerpemutusan=e),class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,o.QD)("div",xe,[Ce,(0,o.K2)(b,{id:"serialnumber",modelValue:n.formCopy.attributes.tglPemutusan,"onUpdate:modelValue":t[24]||(t[24]=e=>n.formCopy.attributes.tglPemutusan=e),showButtonBar:"",showIcon:"",dateFormat:"yy-mm-dd",class:"text-base text-color surface-overlay surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),ve,(0,o.QD)("div",De,[ke,(0,o.K2)(b,{modelValue:n.formCopy.attributes.tglPrint,"onUpdate:modelValue":t[25]||(t[25]=e=>n.formCopy.attributes.tglPrint=e),showButtonBar:"",showIcon:"",dateFormat:"yy-mm-dd",class:"text-base text-color surface-overlay surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,o.QD)("div",we,[Te,(0,o.K2)(u,{id:"namainstaller",modelValue:n.formCopy.attributes.estaterelation,"onUpdate:modelValue":t[26]||(t[26]=e=>n.formCopy.attributes.estaterelation=e),class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,o.QD)("div",Ve,[Qe,(0,o.K2)(u,{id:"namainstaller",modelValue:n.formCopy.attributes.it,"onUpdate:modelValue":t[27]||(t[27]=e=>n.formCopy.attributes.it=e),class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,o.QD)("div",Ie,[Pe,(0,o.K2)(u,{id:"namainstaller",modelValue:n.formCopy.attributes.estatemanagement,"onUpdate:modelValue":t[28]||(t[28]=e=>n.formCopy.attributes.estatemanagement=e),class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])])])],512)])),_:1},8,["visible"]),(0,o.K2)(g,{visible:s.imageDialogVisible,closable:!1,style:{width:"50vh"}},{header:(0,o.Ql)((()=>[(0,o.K2)(i,{label:"Print",icon:"pi pi-print",class:"button-rounded button-text mr-auto button-secondary",onClick:n.printImage},null,8,["onClick"]),(0,o.K2)(i,{label:"Close",icon:"pi pi-times",class:"button-rounded button-text ml-auto button-secondary",onClick:n.hideImageDialog},null,8,["onClick"])])),default:(0,o.Ql)((()=>[(0,o.QD)("img",{src:s.imageSrc,alt:"Image Preview",style:{"max-width":"100%","max-height":"100%"}},null,8,Se)])),_:1},8,["visible"])],64)}a(2168),a(5104),a(8312);var Me=a(100),Ae=a(3952),Ee=a(8830),je=a(5556),Ne=a(7016),Re=a(6716),$e=a(6592),ze=a(2332),Le=a(1340),Oe=a(3592),He=a.p+"assets/pdf/FormInternet.pdf",_e=a.p+"assets/pdf/FormInternetBanara.pdf",We=a.p+"assets/pdf/FormInternetNaraya.pdf";let Ze=new p.c;var Ge={components:{Dialog:Me.c,Button:Ee.c,ConfirmDialog:Ae.c,InputText:f.c,Textarea:je.c,Calendar:ze.c,InternetRate:Le.c,ToggleButton:Ne.c,InputNumber:$e.c,Dropdown:b.c},props:["displayModal","form","refreshList","action","internetRate"],res:null,data(){return{options:["False","True"],statusoptions:["Batal","Aktif"],tipeformoptions:["Pemasangan","Pemutusan"],imageDialogVisible:!1,imageSrc:"",imageWidth:100}},methods:{viewKTP(){this.formCopy.attributes.imgurl?this.openImagePopup():this.$toast.add({severity:"warn",summary:"No KTP",detail:"The KTP image is not available.",life:3e3})},printImage(){const e={1:"MazentaImages",2:"BanaraImages",3:"NarayaImages",4:"MarchandImages"},t=this.formCopy.attributes.project,a=e[t];if(a){const e=new Image;e.onload=()=>{const t=document.createElement("canvas"),a=t.getContext("2d");t.width=e.width,t.height=e.height,a.drawImage(e,0,0);const o=t.toDataURL(),r=window.open("","_blank");r.document.write("<html><head><title>Print Image</title>"),r.document.write("<style>@media print { img { width: 50%; height: auto; } }</style>"),r.document.write("</head><body>"),r.document.write(`<img src="${o}" onload="window.print();">`),r.document.write("</body></html>"),r.document.close()},e.src=`/img/${a}/${this.formCopy.attributes.imgurl}`}else console.error("Project not found!")},openImagePopup(){const e={1:"MazentaImages",2:"BanaraImages",3:"NarayaImages",4:"MarchandImages"},t=this.formCopy.attributes.project,a=e[t];a?(this.imageSrc=`/img/${a}/${this.formCopy.attributes.imgurl}`,this.imageDialogVisible=!0):console.error("Project not found!")},hideImageDialog(){this.imageDialogVisible=!1},formatPrice(e){const t=e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");return`${t},-`},async fillForm(){try{let e,t=this.formCopy.attributes.project,a=Re.c.getters.getRole;"mazentaAdmin"!==a&&"superadmin"!==a||1!==t?"banaraAdmin"!==a&&"superadmin"!==a||2!==t?"narayaAdmin"!==a&&"superadmin"!==a||3!==t||(e=await fetch(We).then((e=>e.arrayBuffer()))):e=await fetch(_e).then((e=>e.arrayBuffer())):e=await fetch(He).then((e=>e.arrayBuffer()));const o=await Oe.PDFDocument.load(e),r=o.getForm(),l=JSON.stringify(this.form.id);let s,n,i,d,u,m,c,p,f;if(this.form.attributes.tglPemasang){const e=this.formCopy.attributes.tglPemasang;[s,d,c]=e.split("-")}if(this.form.attributes.tglPemutusan){const e=this.formCopy.attributes.tglPemutusan;[n,u,p]=e.split("-")}if(this.form.attributes.tglPrint){const e=this.formCopy.attributes.tglPrint;[i,m,f]=e.split("-")}const b=this.form.attributes.alamatpemasang,h=this.form.attributes.alamattagihan,g=30;let y,x,C,v;b.length<=g?(y=b,x=""):(y=b.substr(0,g),x=b.substr(g,g)),h.length<=g?(C=h,v=""):(C=h.substr(0,g),v=h.substr(g,g)),r.getTextField("id").setText(l),r.getTextField("namalengkap").setText(this.form.attributes.namalengkap.toUpperCase()),r.getTextField("notelp").setText(this.form.attributes.notelp.toUpperCase()),r.getTextField("noktp").setText(this.form.attributes.noktp.toUpperCase()),r.getTextField("alamatpemasang").setText(y.toUpperCase()??""),r.getTextField("alamatpemasang1").setText(x.toUpperCase()??""),r.getTextField("alamattagihan").setText(C.toUpperCase()??""),r.getTextField("alamattagihan1").setText(v.toUpperCase()??""),r.getTextField("kel").setText(this.form.attributes.kelpemasang.toUpperCase()??""),r.getTextField("kec").setText(this.form.attributes.kecpemasang.toUpperCase()??""),r.getTextField("pos").setText(this.form.attributes.pospemasang.toUpperCase()??""),r.getTextField("kel2").setText(this.form.attributes.keltagihan.toUpperCase()??""),r.getTextField("kec2").setText(this.form.attributes.kectagihan.toUpperCase()??""),r.getTextField("pos2").setText(this.form.attributes.postagihan.toUpperCase()??""),r.getTextField("email").setText(this.form.attributes.email.toUpperCase()??"");const D=r.getCheckBox("biayainstalasi"),k=r.getCheckBox("premie50"),w=r.getCheckBox("premie100");r.getTextField("harga").setText("150,000,-");const T=r.getTextField("harga1"),V=r.getTextField("harga2");r.getTextField("modem").setText(this.form.attributes.merekModem?.toUpperCase()??""),r.getTextField("serial").setText(this.form.attributes.serialnumber?.toUpperCase()??""),r.getTextField("installerpemasang").setText(this.form.attributes.namainstaller?.toUpperCase()??""),r.getTextField("tahun").setText(s??""),r.getTextField("bln").setText(d??""),r.getTextField("hari").setText(c??""),r.getTextField("installerpemutusan").setText(this.form.attributes.namainstallerpemutusan?.toUpperCase()??""),r.getTextField("tahun2").setText(n??""),r.getTextField("bln2").setText(u??""),r.getTextField("hari2").setText(p??""),r.getTextField("tahun3").setText(i??""),r.getTextField("bln3").setText(m??""),r.getTextField("hari3").setText(f??""),r.getTextField("bintaro").setText("BINTARO"),r.getTextField("estaterelation").setText(this.form.attributes.estaterelation??""),r.getTextField("it").setText(this.form.attributes.it??""),r.getTextField("estatemanagement").setText(this.form.attributes.estatemanagement??""),r.getTextField("namalengkap2").setText(this.form.attributes.namalengkap);const Q=this.formatPrice(this.form.attributes.internetID.data.attributes.price);1==this.form.attributes.instalasi&&D.check(),"1"==this.form.attributes.internetID.data.id?(k.check(),T.setText(Q)):(w.check(),V.setText(Q));const I=await o.save(),P=new Blob([I],{type:"application/pdf"}),F=URL.createObjectURL(P);window.open(F,"_blank"),URL.revokeObjectURL(F)}catch(e){console.error("Error while processing PDF:",e)}},handleClose(){this.$emit("update:form",null),console.log(this.formCopy.attributes.imgurl),this.$emit("update:displayModal",!1),this.imageDialogVisible=!1},async handleSubmit(){try{if(this.formCopy.attributes.tglPemasang){const e=new Date(this.formCopy.attributes.tglPemasang);e.setHours(e.getHours()+7),this.formCopy.attributes.tglPemasang=e.toISOString()}if(this.formCopy.attributes.tglPemutusan){var e=new Date(this.formCopy.attributes.tglPemutusan);e.setHours(e.getHours()+7),this.formCopy.attributes.tglPemutusan=e.toISOString()}if(this.formCopy.attributes.tglPrint){var t=new Date(this.formCopy.attributes.tglPrint);t.setHours(t.getHours()+7),this.formCopy.attributes.tglPrint=t.toISOString()}const a=this.formCopy.attributes.internetID.data.id;let o={...this.formCopy.attributes,internetID:{id:a}},r=this.formCopy.id,l=null,s={data:o};l=await Ze.internetForm.updateByID(r,s),this.handleClose(),this.refreshList(),this.$toast.add({severity:"success",summary:"Form Update Success",detail:`Form #${l.data.data.attributes.formid} has been saved`,life:3e3})}catch(a){console.error("Error while saving form:",a)}}},computed:{formCopy(){return{...this.form}},computedPrice:{get(){return this.form.attributes.internetID&&this.form.attributes.internetID.data?this.formCopy.attributes.internetID.data.attributes.price:null},set(e){this.formCopy.attributes.internetID&&(this.formCopy.attributes.internetID.data.attributes.price=null===e?null:e)}}}},Je=a(4100);const qe=(0,Je.c)(Ge,[["render",Be]]);var Xe=qe,Ye=a(884),et=a.n(Ye),tt=new p.c,at={components:{DataTable:m.c,Column:c.c,InputText:f.c,formModal:Xe,StatusTag:g.c,Dropdown:b.c,BlockUI:y.c},data(){return{formData:null,internetRate:null,action:null,selectedInternet:null,selectedForm:null,role:Re.c.getters.getRole,displayModal:!1,statusfilter:["Semua","Batal","Aktif"],selectedStatus:"Semua",projectfilter:["Project","Mazenta","Banara","Naraya"],selectedProject:"Project",filters:{global:{value:null,matchMode:h.yI.CONTAINS},"attributes.status":{value:null,matchMode:h.yI.EQUALS},"attributes.project":{value:null,matchMode:h.yI.EQUALS}}}},created(){this.getAllForms()},watch:{selectedStatus(e){"Semua"!==e?(this.filters["attributes.status"].value=e,this.getAllForms()):(this.filters["attributes.status"].value=null,this.getAllForms())},selectedProject(e){"Project"!==e?("Mazenta"==e&&(this.filters["attributes.project"].value=1),"Banara"==e&&(this.filters["attributes.project"].value=2),"Naraya"==e&&(this.filters["attributes.project"].value=3),this.getAllForms()):(this.filters["attributes.project"].value=null,this.getAllForms())}},methods:{getStatusText(e){switch(e){case 1:return"Mazenta";case 2:return"Banara";case 3:return"Naraya";default:return""}},async getAllForms(){try{let e=et().stringify({populate:"internetID"}),t=await tt.internetForm.findAll(e);this.filterInternet(t.data.data)}catch(e){console.log(e)}},filterInternet(e){let t=Re.c.getters.getRole;this.formData=e.filter((e=>{const a=e.attributes.project;return"mazentaAdmin"==t?a&&1===a:"banaraAdmin"==t?a&&2===a:"narayaAdmin"==t?a&&3===a:"superadmin"==t?a:void 0}))},async showModal(e,t){this.action=e,this.selectedForm=t,this.displayModal=!0}}};const ot=(0,Je.c)(at,[["render",u]]);var rt=ot}}]);
//# sourceMappingURL=222.js.map