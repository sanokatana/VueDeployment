"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[480],{3740:function(e,t,a){a.d(t,{c:function(){return d}});var o=a(1368),l=a(7988),i=a(9435),r={root:"p-blockui-container"},s=i.c.extend({name:"blockui",classes:r}),n=a(4108),u={name:"BaseBlockUI",extends:l.c,props:{blocked:{type:Boolean,default:!1},fullScreen:{type:Boolean,default:!1},baseZIndex:{type:Number,default:0},autoZIndex:{type:Boolean,default:!0}},style:s,provide:function(){return{$parentInstance:this}}},d={name:"BlockUI",extends:u,emits:["block","unblock"],mask:null,data:function(){return{isBlocked:!1}},watch:{blocked:function(e){!0===e?this.block():this.unblock()}},mounted:function(){this.blocked&&this.block()},methods:{block:function(){var e="p-blockui p-component-overlay p-component-overlay-enter";this.fullScreen?(e+=" p-blockui-document",this.mask=o.kP.createElement("div",{style:{position:"fixed",top:"0",left:"0",width:"100%",height:"100%"},class:!this.isUnstyled&&e,"p-bind":this.ptm("mask")}),document.body.appendChild(this.mask),o.kP.blockBodyScroll(),document.activeElement.blur()):(this.mask=o.kP.createElement("div",{style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%"},class:!this.isUnstyled&&e,"p-bind":this.ptm("mask")}),this.$refs.container.appendChild(this.mask)),this.autoZIndex&&o.eI.set("modal",this.mask,this.baseZIndex+this.$primevue.config.zIndex.modal),this.isBlocked=!0,this.$emit("block")},unblock:function(){var e=this;!this.isUnstyled&&o.kP.addClass(this.mask,"p-component-overlay-leave"),o.kP.hasCSSAnimation(this.mask)>0?this.mask.addEventListener("animationend",(function(){e.removeMask()})):this.removeMask()},removeMask:function(){o.eI.clear(this.mask),this.fullScreen?(document.body.removeChild(this.mask),o.kP.unblockBodyScroll()):this.$refs.container.removeChild(this.mask),this.isBlocked=!1,this.$emit("unblock")}}},c=["aria-busy"];function m(e,t,a,o,l,i){return(0,n.Wz)(),(0,n.An)("div",(0,n.Gu)({ref:"container",class:e.cx("root"),"aria-busy":l.isBlocked},e.ptm("root")),[(0,n.oF)(e.$slots,"default")],16,c)}d.render=m},5556:function(e,t,a){a.d(t,{c:function(){return u}});var o=a(7988),l=a(9435),i={root:function(e){var t=e.instance,a=e.props;return["p-inputtextarea p-inputtext p-component",{"p-filled":t.filled,"p-inputtextarea-resizable ":a.autoResize,"p-invalid":a.invalid,"p-variant-filled":a.variant?"filled"===a.variant:"filled"===t.$primevue.config.inputStyle}]}},r=l.c.extend({name:"textarea",classes:i}),s=a(4108),n={name:"BaseTextarea",extends:o.c,props:{modelValue:null,autoResize:Boolean,invalid:{type:Boolean,default:!1},variant:{type:String,default:null}},style:r,provide:function(){return{$parentInstance:this}}},u={name:"Textarea",extends:n,emits:["update:modelValue"],mounted:function(){this.$el.offsetParent&&this.autoResize&&this.resize()},updated:function(){this.$el.offsetParent&&this.autoResize&&this.resize()},methods:{resize:function(){this.$el.style.height="auto",this.$el.style.height=this.$el.scrollHeight+"px",parseFloat(this.$el.style.height)>=parseFloat(this.$el.style.maxHeight)?(this.$el.style.overflowY="scroll",this.$el.style.height=this.$el.style.maxHeight):this.$el.style.overflow="hidden"},onInput:function(e){this.autoResize&&this.resize(),this.$emit("update:modelValue",e.target.value)}},computed:{filled:function(){return null!=this.modelValue&&this.modelValue.toString().length>0},ptmParams:function(){return{context:{disabled:this.$attrs.disabled||""===this.$attrs.disabled}}}}},d=["value"];function c(e,t,a,o,l,i){return(0,s.Wz)(),(0,s.An)("textarea",(0,s.Gu)({class:e.cx("root"),value:e.modelValue,onInput:t[0]||(t[0]=function(){return i.onInput&&i.onInput.apply(i,arguments)})},e.ptm("root",i.ptmParams)),null,16,d)}u.render=c},6100:function(e,t,a){a.r(t),a.d(t,{default:function(){return ke}});var o=a(4108),l=a(9096);const i={class:"col-12 offset-10"},r=(0,o.QD)("div",{class:"flex justify-content-between align-items-center"},[(0,o.QD)("h1",{class:"text-ggi-red"},"Panel Form - Form Keluhan Pelanggan")],-1),s={class:"flex justify-content-start mb-4"},n={class:"p-input-icon-left"},u=(0,o.QD)("i",{class:"pi pi-search"},null,-1);function d(e,t,a,d,c,m){const p=(0,o.E1)("InputText"),f=(0,o.E1)("Dropdown"),h=(0,o.E1)("BlockUI"),b=(0,o.E1)("Column"),g=(0,o.E1)("StatusTag"),y=(0,o.E1)("DataTable"),k=(0,o.E1)("formModal");return(0,o.Wz)(),(0,o.An)("div",i,[r,(0,o.QD)("div",s,[(0,o.QD)("span",n,[u,(0,o.K2)(p,{modelValue:c.filters["global"].value,"onUpdate:modelValue":t[0]||(t[0]=e=>c.filters["global"].value=e),placeholder:"Keyword Search",class:"w-10rem"},null,8,["modelValue"])]),(0,o.QD)("span",null,[(0,o.K2)(f,{modelValue:c.selectedStatus,"onUpdate:modelValue":t[1]||(t[1]=e=>c.selectedStatus=e),options:c.statusfilter,placeholder:"Select a City",class:"w-full md:w-9rem ml-2"},null,8,["modelValue","options"])]),(0,o.K2)(h,{blocked:"superadmin"!=this.role},{default:(0,o.Ql)((()=>[(0,o.QD)("span",null,[(0,o.K2)(f,{modelValue:c.selectedProject,"onUpdate:modelValue":t[2]||(t[2]=e=>c.selectedProject=e),options:c.projectfilter,placeholder:"Project",class:"w-full md:w-9rem ml-2"},null,8,["modelValue","options"])])])),_:1},8,["blocked"])]),(0,o.K2)(y,{ref:"dt",filters:c.filters,value:c.formData,selectionMode:"single",onRowSelect:t[3]||(t[3]=e=>m.showModal("edit",e.data)),responsiveLayout:"scroll",sortField:"id",sortOrder:1,paginator:!0,rows:15,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown",rowsPerPageOptions:[15,20,30],removableSort:"",dataKey:"id","onUpdate:filters":t[4]||(t[4]=e=>c.filters=e),filterDisplay:"row"},{default:(0,o.Ql)((()=>[(0,o.K2)(b,{field:"attributes.formid",header:"Form ID"}),(0,o.K2)(b,{field:"attributes.name",header:"Nama Pemilik / Penghuni"}),(0,o.K2)(b,{field:"attributes.alamat",header:"Alamat"}),(0,o.K2)(b,{field:"attributes.tglKeluhan",header:"Tanggal Keluhan"}),(0,o.K2)(b,{field:"attributes.status",header:"Status"},{body:(0,o.Ql)((e=>[(0,o.K2)(g,{modelValue:e.data.attributes.status,"onUpdate:modelValue":t=>e.data.attributes.status=t},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),(0,o.K2)(b,{field:"attributes.project",header:"Project"},{body:(0,o.Ql)((e=>[(0,o.QD)("span",null,(0,l.WA)(m.getStatusText(e.data.attributes.project)),1)])),_:1})])),_:1},8,["filters","value"]),(0,o.K2)(k,{displayModal:c.displayModal,"onUpdate:displayModal":t[5]||(t[5]=e=>c.displayModal=e),form:c.selectedForm,"onUpdate:form":t[6]||(t[6]=e=>c.selectedForm=e),refreshList:m.getAllForms,action:c.action},null,8,["displayModal","form","refreshList","action"])])}var c=a(4432),m=a(5160),p=a(2340),f=a(9140),h=a(3740),b=a(6960),g=a(8331),y=a(1147);const k={class:"p-m-0"},v={class:"text-ggi-red"},w={ref:"form"},x={class:"formgrid grid"},C={class:"field col-12 md:col-12"},D=(0,o.QD)("label",null,[(0,o.QD)("span",null,"Status")],-1),P={class:"field col-12 md:col-6"},K=(0,o.QD)("label",null,[(0,o.QD)("span",null,"Tanggal Keluhan")],-1),I={class:"field col-12 md:col-6"},T=(0,o.QD)("label",null,[(0,o.QD)("span",null,"Nama Pemilik / Penghuni:")],-1),V={class:"field col-12 md:col-12"},Q=(0,o.QD)("label",null,"Alamat Pemilik / Penghuni",-1),F={class:"field col-12 md:col-12"},S=(0,o.QD)("label",null,"Uraian Keluhan",-1),B={class:"field col-12 md:col-12"},$=(0,o.QD)("label",null,"Tindakan Perbaikan",-1),U={class:"field col-12 md:col-12"},j=(0,o.QD)("label",null,"Analisa Penyebab Masalah",-1),A={class:"field col-12 md:col-12"},M=(0,o.QD)("label",null,"Tindakan Pencegahan",-1),z={class:"field col-12 md:col-4"},E=(0,o.QD)("label",null,"Status Masalah",-1),N={class:"field col-12 md:col-4"},R=(0,o.QD)("label",null,"Tanggal: ",-1),L={class:"field col-12 md:col-4"},O=(0,o.QD)("label",null,"Jam : ",-1),_={class:"field col-12 md:col-6"},H=(0,o.QD)("label",null,[(0,o.QD)("span",null,"Tenant Relation :")],-1),W={class:"field col-12 md:col-6"},Z=(0,o.QD)("label",null,[(0,o.QD)("span",null,"Diverifikasi Oleh : ")],-1),G={class:"flex flex-row flex-wrap justify-content-center gap-4"},J={class:"flex justify-content-between flex-wrap"},Y={class:"flex"},q={class:"flex"},X=["src"];function ee(e,t,a,i,r,s){const n=(0,o.E1)("Button"),u=(0,o.E1)("Dropdown"),d=(0,o.E1)("Calendar"),c=(0,o.E1)("InputText"),m=(0,o.E1)("Textarea"),p=(0,o.E1)("ConfirmDialog"),f=(0,o.E1)("Dialog");return(0,o.Wz)(),(0,o.An)(o.ae,null,[(0,o.K2)(f,{visible:a.displayModal,modal:!0,closable:!1,style:{width:"90vh"}},{header:(0,o.Ql)((()=>[(0,o.QD)("h3",k,[(0,o.QD)("span",v,"Edit Customer Form Customer Complaint Number # "+(0,l.WA)(a.form.id),1)]),(0,o.K2)(n,{label:"Close",icon:"pi pi-times",class:"button-rounded button-text ml-auto button-secondary",onClick:s.handleClose},null,8,["onClick"])])),footer:(0,o.Ql)((()=>[(0,o.QD)("div",J,[(0,o.QD)("div",Y,[(0,o.K2)(n,{label:"Print",icon:"pi pi-print",onClick:t[22]||(t[22]=e=>s.fillForm())}),(0,o.K2)(n,{label:"Print Semua Photo",icon:"pi pi-print",class:"button-rounded button-text ml-auto button-secondary",onClick:s.printAllImages},null,8,["onClick"])]),(0,o.QD)("div",q,[(0,o.K2)(n,{label:"edit"==a.action?"Save":"Add Document",icon:"edit"==a.action?"pi pi-save":"pi pi-plus",onClick:t[23]||(t[23]=e=>s.handleSubmit(a.action))},null,8,["label","icon"])])]),(0,o.K2)(p)])),default:(0,o.Ql)((()=>[(0,o.QD)("form",w,[(0,o.QD)("div",x,[(0,o.QD)("div",C,[D,(0,o.K2)(u,{modelValue:s.formCopy.attributes.status,"onUpdate:modelValue":t[0]||(t[0]=e=>s.formCopy.attributes.status=e),options:r.statusoptions,class:"text-base text-color surface-overlay surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue","options"])]),(0,o.QD)("div",P,[K,(0,o.K2)(d,{id:"name",modelValue:s.formCopy.attributes.tglKeluhan,"onUpdate:modelValue":t[1]||(t[1]=e=>s.formCopy.attributes.tglKeluhan=e),showButtonBar:"",showIcon:"",dateFormat:"yy-mm-dd",class:"text-base text-color surface-overlay surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,o.QD)("div",I,[T,(0,o.K2)(c,{id:"name",modelValue:s.formCopy.attributes.name,"onUpdate:modelValue":t[2]||(t[2]=e=>s.formCopy.attributes.name=e),class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,o.QD)("div",V,[Q,(0,o.K2)(m,{id:"alamat",autoResize:"",rows:"1",modelValue:s.formCopy.attributes.alamat,"onUpdate:modelValue":t[3]||(t[3]=e=>s.formCopy.attributes.alamat=e),class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,o.QD)("div",F,[S,(0,o.K2)(m,{id:"uraiankeluhan",autoResize:"",rows:"3",modelValue:s.formCopy.attributes.uraiankeluhan,"onUpdate:modelValue":t[4]||(t[4]=e=>s.formCopy.attributes.uraiankeluhan=e),class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,o.QD)("div",B,[$,(0,o.K2)(m,{id:"tindakanperbaikan",autoResize:"",rows:"3",modelValue:s.formCopy.attributes.tindakanperbaikan,"onUpdate:modelValue":t[5]||(t[5]=e=>s.formCopy.attributes.tindakanperbaikan=e),class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,o.QD)("div",U,[j,(0,o.K2)(m,{id:"analisamasalah",autoResize:"",rows:"3",modelValue:s.formCopy.attributes.analisamasalah,"onUpdate:modelValue":t[6]||(t[6]=e=>s.formCopy.attributes.analisamasalah=e),class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,o.QD)("div",A,[M,(0,o.K2)(m,{id:"tindakanpencegahan",autoResize:"",rows:"3",modelValue:s.formCopy.attributes.tindakanpencegahan,"onUpdate:modelValue":t[7]||(t[7]=e=>s.formCopy.attributes.tindakanpencegahan=e),class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"]),(0,o.mY)(" ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ")]),(0,o.QD)("div",z,[E,(0,o.K2)(u,{modelValue:s.formCopy.attributes.masalah,"onUpdate:modelValue":t[8]||(t[8]=e=>s.formCopy.attributes.masalah=e),options:r.masalahOptions,class:"text-base text-color surface-overlay surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue","options"])]),(0,o.QD)("div",N,[R,(0,o.K2)(d,{id:"terbilang",modelValue:s.formCopy.attributes.tglPrint,"onUpdate:modelValue":t[9]||(t[9]=e=>s.formCopy.attributes.tglPrint=e),showButtonBar:"",dateFormat:"yy-mm-dd",showIcon:"",view:"date",class:"text-base text-color surface-overlay surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,o.QD)("div",L,[O,(0,o.K2)(d,{id:"terbilang",modelValue:s.formCopy.attributes.waktu,"onUpdate:modelValue":t[10]||(t[10]=e=>s.formCopy.attributes.waktu=e),showButtonBar:"",showIcon:"",timeOnly:"",class:"text-base text-color surface-overlay surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,o.QD)("div",_,[H,(0,o.K2)(c,{id:"name",modelValue:s.formCopy.attributes.tenant,"onUpdate:modelValue":t[11]||(t[11]=e=>s.formCopy.attributes.tenant=e),class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,o.QD)("div",W,[Z,(0,o.K2)(c,{id:"name",modelValue:s.formCopy.attributes.verifikasi,"onUpdate:modelValue":t[12]||(t[12]=e=>s.formCopy.attributes.verifikasi=e),class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,o.QD)("div",G,[(0,o.K2)(n,{label:"Photo 1",icon:"pi pi-image",onClick:t[13]||(t[13]=e=>s.viewKTP("photo1"))}),(0,o.K2)(n,{label:"Photo 2",icon:"pi pi-image",onClick:t[14]||(t[14]=e=>s.viewKTP("photo2"))}),(0,o.K2)(n,{label:"Photo 3",icon:"pi pi-image",onClick:t[15]||(t[15]=e=>s.viewKTP("photo3"))}),(0,o.K2)(n,{label:"Photo 4",icon:"pi pi-image",onClick:t[16]||(t[16]=e=>s.viewKTP("photo4"))}),(0,o.K2)(n,{label:"Photo 5",icon:"pi pi-image",onClick:t[17]||(t[17]=e=>s.viewKTP("photo5"))}),(0,o.K2)(n,{label:"Photo 6",icon:"pi pi-image",onClick:t[18]||(t[18]=e=>s.viewKTP("photo6"))}),(0,o.K2)(n,{label:"Photo 7",icon:"pi pi-image",onClick:t[19]||(t[19]=e=>s.viewKTP("photo7"))}),(0,o.K2)(n,{label:"Photo 8",icon:"pi pi-image",onClick:t[20]||(t[20]=e=>s.viewKTP("photo8"))}),(0,o.K2)(n,{label:"Photo 9",icon:"pi pi-image",onClick:t[21]||(t[21]=e=>s.viewKTP("photo9"))})])])],512)])),_:1},8,["visible"]),(0,o.K2)(f,{visible:e.imageDialogVisible,closable:!1,style:{width:"50vh"}},{header:(0,o.Ql)((()=>[(0,o.K2)(n,{label:"Print",icon:"pi pi-print",class:"button-rounded button-text mr-auto button-secondary",onClick:s.printCurrentImage},null,8,["onClick"]),(0,o.K2)(n,{label:"Close",icon:"pi pi-times",class:"button-rounded button-text ml-auto button-secondary",onClick:s.hideImageDialog},null,8,["onClick"])])),default:(0,o.Ql)((()=>[(0,o.QD)("img",{src:e.imageSrc,alt:"Image Preview",style:{"max-width":"100%","max-height":"100%"}},null,8,X)])),_:1},8,["visible"])],64)}a(3248),a(2168),a(5104),a(8312);var te=a(100),ae=a(3952),oe=a(8830),le=a(5556),ie=a(6716),re=a(2332),se=a(3592),ne=a.p+"assets/pdf/FormCCMazenta.pdf",ue=a.p+"assets/pdf/FormCCBanara.pdf",de=a.p+"assets/pdf/FormCCNaraya.pdf";let ce=new p.c;var me={components:{Dialog:te.c,Button:oe.c,ConfirmDialog:ae.c,InputText:b.c,Textarea:le.c,Calendar:re.c,Dropdown:f.c},props:["displayModal","form","refreshList","action"],res:null,data(){return{masalahOptions:["Minor","Major"],statusoptions:["Batal","Aktif"]}},methods:{viewKTP(e){const t=this.formCopy.attributes[e];t?this.openImagePopup(t):this.$toast.add({severity:"warn",summary:"No Image",detail:"The image is not available.",life:3e3})},openImagePopup(e){const t={1:"MazentaImages",2:"BanaraImages",3:"NarayaImages",4:"MarchandImages"},a=this.formCopy.attributes.project,o=t[a];o?(this.imageSrc=`/img/${o}/${e}`,this.imageDialogVisible=!0):console.error("Project not found!")},hideImageDialog(){this.imageDialogVisible=!1},printCurrentImage(){this.printImage(this.imageSrc)},printImage(e){const t=new Image;t.onload=()=>{const e=document.createElement("canvas"),a=e.getContext("2d");e.width=t.width,e.height=t.height,a.drawImage(t,0,0);const o=e.toDataURL(),l=window.open("","_blank");l.document.write("<html><head><title>Print Image</title>"),l.document.write("<style>@media print { img { width: 40%; height: auto; } }</style>"),l.document.write("</head><body>"),l.document.write(`<img src="${o}" onload="window.print();">`),l.document.write("</body></html>"),l.document.close()},t.src=e},printAllImages(){const e=[this.formCopy.attributes.ktppemilik,this.formCopy.attributes.ktpmandor,this.formCopy.attributes.ktppekerja1,this.formCopy.attributes.ktppekerja2,this.formCopy.attributes.ktppekerja3],t=e.filter((e=>e));if(0===t.length)return void console.log("No valid image URLs available.");const a={1:"MazentaImages",2:"BanaraImages",3:"NarayaImages",4:"MarchandImages"},o=this.formCopy.attributes.project,l=a[o],i=window.open("","_blank");if(i){const t=[],a=e=>new Promise(((t,a)=>{const o=new Image;o.crossOrigin="anonymous",o.onload=()=>t(o),o.onerror=e=>a(e),o.src=`/img/${l}/${e}`}));Promise.all(e.map((e=>a(e)))).then((e=>{e.forEach((e=>{t.push(e)}));const a=t.map((e=>`<img src="${e.src}" style="width: 33%; height: auto; float: left;">`)).join("");i.document.write("<html><head><title>Print All Images</title>"),i.document.write("<style>@media print { body { display: block; } img { box-sizing: border-box; } }</style>"),i.document.write("</head><body>"),i.document.write(a),i.document.write("</body></html>"),i.document.close(),i.onload=()=>{i.print()}})).catch((e=>{console.error("Error loading images:",e)}))}else console.error("Print window not opened")},changeDataFormat(e){const t=e.split("-"),a=t[0],o=t[1],l=t[2];return`${l}-${o}-${a}`},async fillForm(){try{let e,t=this.formCopy.attributes.project,a=ie.c.getters.getRole;"mazentaAdmin"!==a&&"superadmin"!==a||1!==t?"banaraAdmin"!==a&&"superadmin"!==a||2!==t?"narayaAdmin"!==a&&"superadmin"!==a||3!==t||(e=await fetch(de).then((e=>e.arrayBuffer()))):e=await fetch(ue).then((e=>e.arrayBuffer())):e=await fetch(ne).then((e=>e.arrayBuffer()));const o=await se.PDFDocument.load(e),l=o.getForm();l.getTextField("id").setText(JSON.stringify(this.form.id));const i=this.changeDataFormat(this.form.attributes.tglKeluhan);l.getTextField("tglKeluhan").setText(i),l.getTextField("nama").setText(this.form.attributes.name),l.getTextField("alamat").setText(this.form.attributes.alamat),l.getTextField("uraiankeluhan").setText(this.form.attributes.uraiankeluhan),l.getTextField("tindakanperbaikan").setText(this.form.attributes.tindakanperbaikan??""),l.getTextField("analisa").setText(this.form.attributes.analisamasalah??""),l.getTextField("tindakanpencegahan").setText(this.form.attributes.tindakanpencegahan??""),l.getTextField("masalah").setText(this.form.attributes.masalah??"");const r=this.changeDataFormat(this.form.attributes.tglPrint);l.getTextField("tglPrint").setText(r),l.getTextField("tenant").setText(this.form.attributes.tenant),l.getTextField("verifikasi").setText(this.form.attributes.verifikasi);const s=this.form.attributes.waktu,[n,u]=s.split(":");l.getTextField("waktu").setText(n+":"+u);const d=await o.save(),c=new Blob([d],{type:"application/pdf"}),m=URL.createObjectURL(c);window.open(m,"_blank"),URL.revokeObjectURL(m)}catch(e){console.error("Error while processing PDF:",e)}},handleClose(){this.$emit("update:form",null),this.$emit("update:displayModal",!1)},async handleSubmit(){try{const e=new Date(this.formCopy.attributes.tglKeluhan);if(e.setHours(e.getHours()+7),this.formCopy.attributes.tglKeluhan=e.toISOString(),isNaN(new Date(this.formCopy.attributes.waktu)))this.formCopy.attributes.waktu;else{let e=new Date(this.formCopy.attributes.waktu),t=e.getHours().toString().padStart(2,"0"),a=e.getMinutes().toString().padStart(2,"0");this.formCopy.attributes.waktu=`${t}:${a}:00`}const t=new Date(this.formCopy.attributes.tglPrint);t.setHours(t.getHours()+7),this.formCopy.attributes.tglPrint=t.toISOString();let a={...this.formCopy.attributes},o=this.formCopy.id,l=null,i={data:a};l=await ce.ccForm.updateByID(o,i),this.handleClose(),this.refreshList(),console.log(l),this.$toast.add({severity:"success",summary:"Form Update Success",detail:`Form #${l.data.data.id} has been saved`,life:3e3})}catch(e){console.error("Error while saving form:",e)}}},computed:{formCopy(){return{...this.form}}}},pe=a(4100);const fe=(0,pe.c)(me,[["render",ee]]);var he=fe,be=new p.c,ge={components:{DataTable:c.c,Column:m.c,InputText:b.c,formModal:he,Dropdown:f.c,StatusTag:y.c,BlockUI:h.c},data(){return{formData:null,action:null,selectedForm:null,role:ie.c.getters.getRole,displayModal:!1,statuses:["Batal","Aktif"],statusfilter:["Semua","Batal","Aktif"],selectedStatus:"Semua",projectfilter:["Project","Mazenta","Banara","Naraya"],selectedProject:"Project",filters:{global:{value:null,matchMode:g.yI.CONTAINS},"attributes.status":{value:null,matchMode:g.yI.CONTAINS},"attributes.project":{value:null,matchMode:g.yI.CONTAINS}}}},created(){this.getAllForms()},watch:{selectedStatus(e){"Semua"!==e?(this.filters["attributes.status"].value=e,this.getAllForms()):(this.filters["attributes.status"].value=null,this.getAllForms())},selectedProject(e){"Project"!==e?("Mazenta"==e&&(this.filters["attributes.project"].value=1),"Banara"==e&&(this.filters["attributes.project"].value=2),"Naraya"==e&&(this.filters["attributes.project"].value=3),this.getAllForms()):(this.filters["attributes.project"].value=null,this.getAllForms())}},methods:{getStatusText(e){switch(e){case 1:return"Mazenta";case 2:return"Banara";case 3:return"Naraya";default:return""}},async getAllForms(){try{let e=await be.ccForm.findAll();this.filterInternet(e.data.data)}catch(e){console.log(e)}},filterInternet(e){let t=ie.c.getters.getRole;this.formData=e.filter((e=>{const a=e.attributes.project;return"mazentaAdmin"==t?a&&1===a:"banaraAdmin"==t?a&&2===a:"narayaAdmin"==t?a&&3===a:"superadmin"==t?a:void 0}))},showModal(e,t){this.action=e,this.selectedForm=t,this.displayModal=!0}}};const ye=(0,pe.c)(ge,[["render",d]]);var ke=ye}}]);
//# sourceMappingURL=480.js.map