"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[220],{2220:function(e,t,a){a.r(t),a.d(t,{default:function(){return Ae}});var l=a(4108);const o={class:"col-12 offset-10"},r=(0,l.QD)("div",{class:"flex justify-content-between align-items-center"},[(0,l.QD)("h1",{class:"text-ggi-red"},"Panel Form - Surat Permohonan Izin Kerja")],-1),i={class:"flex justify-content-start mb-4"},s={class:"p-input-icon-left"},n=(0,l.QD)("i",{class:"pi pi-search"},null,-1);function d(e,t,a,d,u,c){const m=(0,l.E1)("Button"),p=(0,l.E1)("InputText"),f=(0,l.E1)("Dropdown"),b=(0,l.E1)("Column"),h=(0,l.E1)("StatusTag"),g=(0,l.E1)("DataTable"),y=(0,l.E1)("formModal");return(0,l.Wz)(),(0,l.An)("div",o,[r,(0,l.QD)("div",i,[(0,l.QD)("span",null,[(0,l.K2)(m,{autoRezise:"false",label:"Create",icon:"pi pi-plus",onClick:t[0]||(t[0]=e=>c.showModal("new")),class:"mr-2"})]),(0,l.QD)("span",s,[n,(0,l.K2)(p,{modelValue:u.filters["global"].value,"onUpdate:modelValue":t[1]||(t[1]=e=>u.filters["global"].value=e),placeholder:"Keyword Search",class:"w-10rem"},null,8,["modelValue"])]),(0,l.QD)("span",null,[(0,l.K2)(f,{modelValue:u.selectedStatus,"onUpdate:modelValue":t[2]||(t[2]=e=>u.selectedStatus=e),options:u.statusfilter,class:"w-full md:w-9rem ml-2"},null,8,["modelValue","options"])])]),(0,l.K2)(g,{ref:"formModal",value:u.formData,selection:u.selectedForm,"onUpdate:selection":t[3]||(t[3]=e=>u.selectedForm=e),selectionMode:"single",onRowSelect:c.handleRowSelect,responsiveLayout:"scroll",sortField:"id",sortOrder:1,paginator:!0,rows:15,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown",rowsPerPageOptions:[15,20,30],removableSort:"",dataKey:"id",filters:u.filters,"onUpdate:filters":t[4]||(t[4]=e=>u.filters=e),filterDisplay:"row"},{default:(0,l.Ql)((()=>[(0,l.K2)(b,{field:"id",header:"Form ID",showFilterMenu:!1}),(0,l.K2)(b,{field:"attributes.namapemilik",header:"Nama Pemilik",showFilterMenu:!1}),(0,l.K2)(b,{field:"attributes.nounit",header:"No.Unit",showFilterMenu:!1}),(0,l.K2)(b,{field:"attributes.pekerjaan",header:"Pekerjaan",showFilterMenu:!1}),(0,l.K2)(b,{field:"attributes.kontraktor",header:"Nama Kontraktor",showFilterMenu:!1}),(0,l.K2)(b,{field:"attributes.status",header:"Status"},{body:(0,l.Ql)((e=>[(0,l.K2)(h,{modelValue:e.data.attributes.status,"onUpdate:modelValue":t=>e.data.attributes.status=t},null,8,["modelValue","onUpdate:modelValue"])])),_:1})])),_:1},8,["value","selection","onRowSelect","filters"]),u.displayModal?((0,l.Wz)(),(0,l.Az)(y,{key:0,ref:"formModalRef",displayModal:u.displayModal,"onUpdate:displayModal":t[5]||(t[5]=e=>u.displayModal=e),form:u.selectedForm,"onUpdate:form":t[6]||(t[6]=e=>u.selectedForm=e),refreshList:c.getAllForms,action:u.action},null,8,["displayModal","form","refreshList","action"])):(0,l.g1)("",!0)])}var u=a(4432),c=a(5160),m=a(2340),p=a(8830),f=a(9140),b=a(1147),h=a(6960),g=a(8331),y=a(9096);const w={key:0,class:"m-0"},k={class:"text-dgas-red"},D={key:1,class:"m-0"},C=(0,l.QD)("span",{class:"text-ggi-red"},"Create Document",-1),v=[C],x={ref:"form"},Q={class:"formgrid grid"},K=(0,l.QD)("div",{class:"field col-12 md:col-10"},[(0,l.QD)("h3",{class:"text-base text-color surface-overlay surface-border border-round appearance-none outline-none focus:border-primary w-full"}," Surat Izin Kerja Form")],-1),T={class:"field col-12 md:col-2"},F=(0,l.QD)("label",null,[(0,l.QD)("span",null,"Status")],-1),M={class:"field col-12 md:col-12"},P=(0,l.QD)("label",null,[(0,l.QD)("span",null,"Nama Pemilik")],-1),V={class:"field col-12 md:col-12"},S=(0,l.QD)("label",null,[(0,l.QD)("span",null,"No.Unit")],-1),I={class:"field col-12 md:col-12"},U=(0,l.QD)("label",null,[(0,l.QD)("span",null,"Jenis Pekerjaan")],-1),j={class:"field col-12 md:col-12"},A=(0,l.QD)("label",null,[(0,l.QD)("span",null,"Kontraktor")],-1),E={class:"field col-12 md:col-12"},R=(0,l.QD)("label",null,[(0,l.QD)("span",null,"Penanggung Jawab")],-1),L={class:"field col-12 md:col-6"},z=(0,l.QD)("label",null,"Waktu Mulai: ",-1),$={class:"field col-12 md:col-6"},B=(0,l.QD)("label",null,"Waktu Selesai: ",-1),N={key:0,class:"text-base text-color surface-overlay surface-border border-round appearance-none outline-none focus:border-primary w-full"},W={class:"field col-12 md:col-12"},O={class:"field col-12 md:col-6"},_=(0,l.QD)("label",null,[(0,l.QD)("span",null,"Tenant Relation")],-1),G={class:"field col-12 md:col-6"},H=(0,l.QD)("label",null,[(0,l.QD)("span",null,"Managmenet")],-1),J={class:"flex flex-row flex-wrap justify-content-center gap-3"},q={class:"flex justify-content-between flex-wrap"},X={class:"flex"},Y={class:"flex"},Z=["src"];function ee(e,t,a,o,r,i){const s=(0,l.E1)("Button"),n=(0,l.E1)("Dropdown"),d=(0,l.E1)("InputText"),u=(0,l.E1)("Calendar"),c=(0,l.E1)("Column"),m=(0,l.E1)("DataTable"),p=(0,l.E1)("ConfirmDialog"),f=(0,l.E1)("Dialog"),b=(0,l.E1)("formMod");return(0,l.Wz)(),(0,l.An)(l.ae,null,[(0,l.K2)(f,{visible:a.displayModal,modal:!0,closable:!1,style:{width:"90vh"}},{header:(0,l.Ql)((()=>[a.form.id?((0,l.Wz)(),(0,l.An)("h3",w,[(0,l.QD)("span",k,"Edit Document "+(0,y.WA)(a.form.id),1)])):((0,l.Wz)(),(0,l.An)("h3",D,v)),(0,l.K2)(s,{label:"Close",icon:"pi pi-times",class:"button-rounded button-text ml-auto button-secondary",onClick:i.handleClose},null,8,["onClick"])])),footer:(0,l.Ql)((()=>[(0,l.QD)("div",q,[(0,l.QD)("div",X,[(0,l.K2)(s,{label:"Print",icon:"pi pi-print",onClick:t[20]||(t[20]=e=>i.fillForm())}),(0,l.K2)(s,{label:"Print Semua KTP",icon:"pi pi-print",class:"button-rounded button-text ml-auto button-secondary",onClick:i.printAllImages},null,8,["onClick"])]),(0,l.QD)("div",Y,[(0,l.K2)(s,{label:"edit"==a.action?"Save":"Add Document",icon:"edit"==a.action?"pi pi-save":"pi pi-plus",onClick:t[21]||(t[21]=e=>i.handleSubmit(a.action))},null,8,["label","icon"])])]),(0,l.K2)(p)])),default:(0,l.Ql)((()=>[(0,l.QD)("form",x,[(0,l.QD)("div",Q,[K,(0,l.QD)("div",T,[F,(0,l.K2)(n,{modelValue:i.formCopy.attributes.status,"onUpdate:modelValue":t[0]||(t[0]=e=>i.formCopy.attributes.status=e),options:r.statusoptions,class:"text-base text-color surface-overlay surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue","options"])]),(0,l.QD)("div",M,[P,(0,l.K2)(d,{modelValue:i.formCopy.attributes.namapemilik,"onUpdate:modelValue":t[1]||(t[1]=e=>i.formCopy.attributes.namapemilik=e),class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,l.QD)("div",V,[S,(0,l.K2)(d,{modelValue:i.formCopy.attributes.nounit,"onUpdate:modelValue":t[2]||(t[2]=e=>i.formCopy.attributes.nounit=e),class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,l.QD)("div",I,[U,(0,l.K2)(d,{modelValue:i.formCopy.attributes.pekerjaan,"onUpdate:modelValue":t[3]||(t[3]=e=>i.formCopy.attributes.pekerjaan=e),class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,l.QD)("div",j,[A,(0,l.K2)(d,{modelValue:i.formCopy.attributes.kontraktor,"onUpdate:modelValue":t[4]||(t[4]=e=>i.formCopy.attributes.kontraktor=e),class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,l.QD)("div",E,[R,(0,l.K2)(d,{modelValue:i.formCopy.attributes.penanggung,"onUpdate:modelValue":t[5]||(t[5]=e=>i.formCopy.attributes.penanggung=e),class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,l.QD)("div",L,[z,(0,l.K2)(u,{id:"terbilang",modelValue:i.formCopy.attributes.mulai,"onUpdate:modelValue":t[6]||(t[6]=e=>i.formCopy.attributes.mulai=e),showButtonBar:"",showIcon:"",timeOnly:"",class:"text-base text-color surface-overlay surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,l.QD)("div",$,[B,(0,l.K2)(u,{id:"terbilang",modelValue:i.formCopy.attributes.selesai,"onUpdate:modelValue":t[7]||(t[7]=e=>i.formCopy.attributes.selesai=e),showButtonBar:"",showIcon:"",timeOnly:"",class:"text-base text-color surface-overlay surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),a.form.id?(0,l.g1)("",!0):((0,l.Wz)(),(0,l.An)("h3",N," Mohon Tambahkan Dokumen Dahulu Sebelum Input Ini")),(0,l.QD)("div",W,[(0,l.QD)("span",null,[(0,l.K2)(s,{autoRezise:"false",label:"Create",icon:"pi pi-plus",onClick:t[8]||(t[8]=e=>i.showModal("new")),class:"mr-2"})]),(0,l.K2)(m,{value:r.filteredForms,selection:r.selectForm,"onUpdate:selection":t[9]||(t[9]=e=>r.selectForm=e),selectionMode:"single",onRowSelect:t[10]||(t[10]=e=>i.showModal("edit")),responsiveLayout:"scroll",sortField:"id",sortOrder:1,paginator:!0,rows:10},{default:(0,l.Ql)((()=>[(0,l.K2)(c,{field:"attributes.name",header:"Nama Pekerja"}),(0,l.K2)(c,{field:"attributes.peralatan",header:"Peralatan"}),(0,l.K2)(c,{field:"attributes.rincian",header:"Rincian Pekerjaan"})])),_:1},8,["value","selection"])]),(0,l.QD)("div",O,[_,(0,l.K2)(d,{modelValue:i.formCopy.attributes.tenant,"onUpdate:modelValue":t[11]||(t[11]=e=>i.formCopy.attributes.tenant=e),class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,l.QD)("div",G,[H,(0,l.K2)(d,{modelValue:i.formCopy.attributes.management,"onUpdate:modelValue":t[12]||(t[12]=e=>i.formCopy.attributes.management=e),class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,l.QD)("div",J,[(0,l.K2)(s,{label:"KTP Pemilik",icon:"pi pi-image",onClick:t[13]||(t[13]=e=>i.viewKTP("ktppemilik"))}),(0,l.K2)(s,{label:"KTP Mandor",icon:"pi pi-image",onClick:t[14]||(t[14]=e=>i.viewKTP("ktpmandor"))}),(0,l.K2)(s,{label:"KTP Pekerja 1",icon:"pi pi-image",onClick:t[15]||(t[15]=e=>i.viewKTP("ktppekerja1"))}),(0,l.K2)(s,{label:"KTP Pekerja 2",icon:"pi pi-image",onClick:t[16]||(t[16]=e=>i.viewKTP("ktppekerja2"))}),(0,l.K2)(s,{label:"KTP Pekerja 3",icon:"pi pi-image",onClick:t[17]||(t[17]=e=>i.viewKTP("ktppekerja3"))}),(0,l.K2)(s,{label:"Gambar Pelaksanaan",icon:"pi pi-image",onClick:t[18]||(t[18]=e=>i.viewKTP("gambarpelak"))}),(0,l.K2)(s,{label:"Gambar Rencana",icon:"pi pi-image",onClick:t[19]||(t[19]=e=>i.viewKTP("gambarrencana"))})])])],512)])),_:1},8,["visible"]),(0,l.K2)(f,{visible:r.imageDialogVisible,closable:!1,style:{width:"50vh"}},{header:(0,l.Ql)((()=>[(0,l.K2)(s,{label:"Print",icon:"pi pi-print",class:"button-rounded button-text mr-auto button-secondary",onClick:i.printCurrentImage},null,8,["onClick"]),(0,l.K2)(s,{label:"Close",icon:"pi pi-times",class:"button-rounded button-text ml-auto button-secondary",onClick:i.hideImageDialog},null,8,["onClick"])])),default:(0,l.Ql)((()=>[(0,l.QD)("img",{src:r.imageSrc,alt:"Image Preview",style:{"max-width":"100%","max-height":"100%"}},null,8,Z)])),_:1},8,["visible"]),(0,l.K2)(b,{dispModal:r.dispModal,"onUpdate:dispModal":t[22]||(t[22]=e=>r.dispModal=e),form:r.selectForm,"onUpdate:form":t[23]||(t[23]=e=>r.selectForm=e),formRow:i.formCopy,"onUpdate:formRow":t[24]||(t[24]=e=>i.formCopy=e),refreshList:i.getAllFormulirs,act:r.act},null,8,["dispModal","form","formRow","refreshList","act"])],64)}a(3248),a(2168),a(5104),a(8312);var te=a(100),ae=a(3952),le=a(2332);const oe={key:0,class:"m-0"},re={class:"text-dgas-red"},ie={key:1,class:"m-0"},se=(0,l.QD)("span",{class:"text-ggi-red"},"Create Row ",-1),ne=[se],de={ref:"form"},ue={class:"formgrid grid"},ce={class:"field col-12 md:col-12"},me=(0,l.QD)("label",null,[(0,l.QD)("span",null,"Nama Pekerja")],-1),pe={class:"field col-12 md:col-12"},fe=(0,l.QD)("label",null,[(0,l.QD)("span",null,"Peralatan")],-1),be={class:"field col-12 md:col-12"},he=(0,l.QD)("label",null,[(0,l.QD)("span",null,"Rincian Pekerjaan")],-1),ge={class:"p-d-flex p-jc-between p-ai-center"},ye={class:"p-text-left"};function we(e,t,a,o,r,i){const s=(0,l.E1)("Button"),n=(0,l.E1)("InputText"),d=(0,l.E1)("ConfirmDialog"),u=(0,l.E1)("Dialog");return(0,l.Wz)(),(0,l.Az)(u,{visible:a.dispModal,modal:!0,closable:!1,style:{width:"90vh"}},{header:(0,l.Ql)((()=>[a.form.id?((0,l.Wz)(),(0,l.An)("h3",oe,[(0,l.QD)("span",re,"Edit Row - "+(0,y.WA)(a.form.attributes.name),1)])):((0,l.Wz)(),(0,l.An)("h3",ie,ne)),(0,l.K2)(s,{label:"Close",icon:"pi pi-times",class:"button-rounded button-text ml-auto button-secondary",onClick:i.handleClose},null,8,["onClick"])])),footer:(0,l.Ql)((()=>[(0,l.QD)("div",ge,[(0,l.QD)("div",ye,[(0,l.K2)(s,{label:"edit"==a.act?"Save":"Add Row",icon:"edit"==a.act?"pi pi-save":"pi pi-plus",onClick:t[3]||(t[3]=t=>i.handleSubmit(e.action))},null,8,["label","icon"])])]),(0,l.K2)(d)])),default:(0,l.Ql)((()=>[(0,l.QD)("form",de,[(0,l.QD)("div",ue,[(0,l.QD)("div",ce,[me,(0,l.K2)(n,{id:"name",modelValue:i.formCopy.attributes.name,"onUpdate:modelValue":t[0]||(t[0]=e=>i.formCopy.attributes.name=e),class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,l.QD)("div",pe,[fe,(0,l.K2)(n,{id:"name",modelValue:i.formCopy.attributes.peralatan,"onUpdate:modelValue":t[1]||(t[1]=e=>i.formCopy.attributes.peralatan=e),class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])]),(0,l.QD)("div",be,[he,(0,l.K2)(n,{id:"name",modelValue:i.formCopy.attributes.rincian,"onUpdate:modelValue":t[2]||(t[2]=e=>i.formCopy.attributes.rincian=e),class:"text-base text-color surface-overlay p-2 border-1 border-solid surface-border border-round appearance-none outline-none focus:border-primary w-full"},null,8,["modelValue"])])])],512)])),_:1},8,["visible"])}let ke=new m.c;var De={components:{Dialog:te.c,Button:p.c,ConfirmDialog:ae.c,InputText:h.c},props:["dispModal","form","refreshList","act","formRow"],res:null,data(){return{}},methods:{handleClose(){this.$emit("update:form",null),this.$emit("update:dispModal",!1)},async handleSubmit(){try{const e=this.formCopy1.id;let t={...this.formCopy.attributes,izinMarchandID:{id:e}},a=this.formCopy.id,l=null,o={data:t};l=null==this.form.id?await ke.kerjaTable.newEntry(o):await ke.kerjaTable.updateByID(a,o),this.handleClose(),this.refreshList(),this.$toast.add({severity:"success",summary:"Form Update Success",detail:`Form #${l.data.data.id} has been saved`,life:3e3})}catch(e){console.error("Error while saving form:",e)}}},computed:{formCopy(){return{...this.form}},formCopy1(){return{...this.formRow}}}},Ce=a(4100);const ve=(0,Ce.c)(De,[["render",we]]);var xe=ve,Qe=a(884),Ke=a.n(Qe),Te=a(3592),Fe=a.p+"assets/pdf/IzinMarchand.pdf";let Me=new m.c;var Pe={components:{Dialog:te.c,Button:p.c,ConfirmDialog:ae.c,InputText:h.c,Dropdown:f.c,Calendar:le.c,DataTable:u.c,Column:c.c,formMod:xe},props:["displayModal","form","refreshList","action"],res:null,data(){return{act:null,selectForm:null,dispModal:!1,selectedFormId:null,statusOptionsToko:["Tenant Buka Toko","Tenant Renovasi Toko","Lainnya"],statusoptions:["Batal","Aktif"],filteredForms:[],imageDialogVisible:!1,imageSrc:""}},mounted(){this.getAllFormulirs()},methods:{viewKTP(e){const t=this.formCopy.attributes[e];t?this.openImagePopup(t):this.$toast.add({severity:"warn",summary:"No Image",detail:"The image is not available.",life:3e3})},openImagePopup(e){this.imageSrc=`/img/MarchandImages/${e}`,this.imageDialogVisible=!0},hideImageDialog(){this.imageDialogVisible=!1},printCurrentImage(){this.printImage(this.imageSrc)},printImage(e){const t=new Image;t.onload=()=>{const e=document.createElement("canvas"),a=e.getContext("2d");e.width=t.width,e.height=t.height,a.drawImage(t,0,0);const l=e.toDataURL(),o=window.open("","_blank");o.document.write("<html><head><title>Print Image</title>"),o.document.write("<style>@media print { img { width: 40%; height: auto; } }</style>"),o.document.write("</head><body>"),o.document.write(`<img src="${l}" onload="window.print();">`),o.document.write("</body></html>"),o.document.close()},t.src=e},printAllImages(){const e=[this.formCopy.attributes.ktppemilik,this.formCopy.attributes.ktpmandor,this.formCopy.attributes.ktppekerja1,this.formCopy.attributes.ktppekerja2,this.formCopy.attributes.ktppekerja3],t=e.filter((e=>e));if(0===t.length)return void console.log("No valid image URLs available.");const a=window.open("","_blank");if(a){const t=[],l=e=>new Promise(((t,a)=>{const l=new Image;l.crossOrigin="anonymous",l.onload=()=>t(l),l.onerror=e=>a(e),l.src=`/img/MarchandImages/${e}`}));Promise.all(e.map((e=>l(e)))).then((e=>{e.forEach((e=>{t.push(e)}));const l=t.map((e=>`<img src="${e.src}" style="width: 33%; height: auto; float: left;">`)).join("");a.document.write("<html><head><title>Print All Images</title>"),a.document.write("<style>@media print { body { display: block; } img { box-sizing: border-box; } }</style>"),a.document.write("</head><body>"),a.document.write(l),a.document.write("</body></html>"),a.document.close(),a.onload=()=>{a.print()}})).catch((e=>{console.error("Error loading images:",e)}))}else console.error("Print window not opened")},async fillForm(){try{let e=await fetch(Fe).then((e=>e.arrayBuffer()));const t=await Te.PDFDocument.load(e),a=t.getForm();a.getTextField("namapemilik").setText(this.form.attributes.namapemilik??""),a.getTextField("nounit").setText(this.form.attributes.nounit??""),a.getTextField("pekerjaan").setText(this.form.attributes.pekerjaan??""),a.getTextField("kontraktor").setText(this.form.attributes.kontraktor??""),a.getTextField("jawab").setText(this.form.attributes.penanggung??"");const[l,o]=this.form.attributes.mulai.split(":");a.getTextField("mulai").setText(l+":"+o+":00");const[r,i]=this.form.attributes.selesai.split(":");a.getTextField("selesai").setText(r+":"+i+":00"),a.getTextField("tenant").setText(this.form.attributes.tenant??""),a.getTextField("management").setText(this.form.attributes.management??"");for(let u=0;u<this.filteredForms.length;u++){const e=this.filteredForms[u].attributes;a.getTextField(`namapekerja${u}`).setText(e.name),a.getTextField(`peralatan${u}`).setText(e.peralatan),a.getTextField(`rincian${u}`).setText(e.rincian)}const s=await t.save(),n=new Blob([s],{type:"application/pdf"}),d=URL.createObjectURL(n);window.open(d,"_blank"),URL.revokeObjectURL(d)}catch(e){console.error("Error while processing PDF:",e)}},async callGetAllFormulirs(){try{await this.getAllFormulirs()}catch(e){console.log(e)}},async getAllFormulirs(){try{let e=Ke().stringify({populate:"izinMarchandID"}),t=await Me.kerjaTable.findAll(e);this.filterInternet(t.data.data)}catch(e){console.log(e)}},filterInternet(e){this.filteredForms=e.filter((e=>{const t=e.attributes.izinMarchandID.data;return t&&t.id===this.formCopy.id}))},showModal(e){this.act=e,"new"==e&&(this.selectForm={id:null,attributes:{}}),this.dispModal=!0},handleClose(){this.$emit("update:form",null),this.$emit("update:displayModal",!1)},async handleSubmit(){try{if(isNaN(new Date(this.formCopy.attributes.mulai)))this.formCopy.attributes.mulai;else{let e=new Date(this.formCopy.attributes.mulai),t=e.getHours().toString().padStart(2,"0"),a=e.getMinutes().toString().padStart(2,"0");this.formCopy.attributes.mulai=`${t}:${a}:00`}if(isNaN(new Date(this.formCopy.attributes.selesai)))this.formCopy.attributes.selesai;else{let e=new Date(this.formCopy.attributes.selesai),t=e.getHours().toString().padStart(2,"0"),a=e.getMinutes().toString().padStart(2,"0");this.formCopy.attributes.selesai=`${t}:${a}:00`}let e={...this.formCopy.attributes},t=this.formCopy.id,a=null,l={data:e};a=await Me.izinMarchand.updateByID(t,l),this.handleClose(),this.refreshList(),this.$toast.add({severity:"success",summary:"Form Update Success",detail:`Form #${a.data.data.id} has been saved`,life:3e3})}catch(e){console.error("Error while saving form:",e)}}},computed:{formCopy(){return{...this.form}}}};const Ve=(0,Ce.c)(Pe,[["render",ee]]);var Se=Ve,Ie=new m.c,Ue={components:{DataTable:u.c,Column:c.c,InputText:h.c,formModal:Se,Button:p.c,Dropdown:f.c,StatusTag:b.c},data(){return{formData:null,action:null,selectedForm:null,displayModal:!1,statuses:["Batal","Aktif"],statusfilter:["Semua","Batal","Aktif"],selectedStatus:"Semua",filters:{global:{value:null,matchMode:g.yI.CONTAINS},"attributes.status":{value:null,matchMode:g.yI.EQUALS}}}},created(){this.getAllForms()},watch:{selectedStatus(e){"Semua"!==e?(this.filters["attributes.status"].value=e,this.getAllForms()):(this.filters["attributes.status"].value=null,this.getAllForms())}},methods:{async getAllForms(){try{let e=await Ie.izinMarchand.findAll();this.formData=e.data.data}catch(e){console.log(e)}},handleRowSelect(){this.showModal("edit"),this.$refs.formModalRef&&this.$refs.formModalRef.callGetAllFormulirs()},showModal(e){this.action=e,"new"==e&&(this.selectedForm={id:null,attributes:{}}),this.displayModal=!0}}};const je=(0,Ce.c)(Ue,[["render",d]]);var Ae=je}}]);
//# sourceMappingURL=220.js.map