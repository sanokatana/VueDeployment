"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[312],{3312:function(s,l,e){e.r(l),e.d(l,{default:function(){return x}});var a=e(4108),t=e(7764),o=e(9096);const n=s=>((0,a.ED)("data-v-ac376848"),s=s(),(0,a.ii)(),s),i={class:"grid my-5 justify-content-center"},r=n((()=>(0,a.QD)("h3",{class:"text-dgas-red my-0"},"My Profile",-1))),d={class:"fluid formgrid grid my-0"},c={class:"float-label field col-12 my-4"},u=n((()=>(0,a.QD)("label",{class:"ml-2"},"Full Name",-1))),m={class:"float-label field col-12 my-4"},f=n((()=>(0,a.QD)("label",{class:"ml-2"},"Username",-1))),p={class:"float-label field col-12 my-4"},h=n((()=>(0,a.QD)("label",{class:"ml-2"},"Email",-1))),w={class:"flex my-3"},g={class:"field col-12 my-4"},y=n((()=>(0,a.QD)("label",{class:"ml-2"},"Current Password",-1))),P={class:"field col-12 my-4"},b=n((()=>(0,a.QD)("label",{class:"ml-2"},"New Password",-1))),v={class:"field col-12 my-4"},Q=n((()=>(0,a.QD)("label",{class:"ml-2"},"Confirm New Password",-1)));function D(s,l,e,n,D,V){const C=(0,a.E1)("InputText"),k=(0,a.E1)("Button"),U=(0,a.E1)("Card"),K=(0,a.E1)("Password"),M=(0,a.E1)("Dialog");return(0,a.Wz)(),(0,a.An)("div",i,[(0,a.K2)(U,{class:"col-3"},{title:(0,a.Ql)((()=>[r])),content:(0,a.Ql)((()=>[(0,a.QD)("div",d,[(0,a.QD)("span",c,[(0,a.K2)(C,{modelValue:D.fullname,"onUpdate:modelValue":l[0]||(l[0]=s=>D.fullname=s),readonly:""},null,8,["modelValue"]),u]),(0,a.QD)("span",m,[(0,a.K2)(C,{modelValue:D.username,"onUpdate:modelValue":l[1]||(l[1]=s=>D.username=s),readonly:""},null,8,["modelValue"]),f]),(0,a.QD)("span",p,[(0,a.K2)(C,{modelValue:D.email,"onUpdate:modelValue":l[2]||(l[2]=s=>D.email=s),readonly:""},null,8,["modelValue"]),h])]),(0,a.QD)("div",w,[(0,a.K2)(k,{label:"Change Password",icon:"pi pi-lock",onClick:l[3]||(l[3]=s=>D.displayModal=!0)})])])),_:1}),(0,a.K2)(M,{visible:D.displayModal,"onUpdate:visible":l[9]||(l[9]=s=>D.displayModal=s),modal:!0,header:"Change Your Password",style:{width:"50vh"}},{footer:(0,a.Ql)((()=>[(0,a.K2)(k,{label:"Submit",icon:"pi pi-check",onClick:l[8]||(l[8]=s=>V.handlePassword())})])),default:(0,a.Ql)((()=>[(0,a.QD)("form",{onSubmit:l[7]||(l[7]=(0,t.Y7)((()=>{}),["prevent"])),class:"formgrid grid my-0"},[(0,a.QD)("span",g,[(0,a.K2)(K,{modelValue:D.currentPass,"onUpdate:modelValue":l[4]||(l[4]=s=>D.currentPass=s),feedback:!1,toggleMask:!0,class:(0,o.WN)({"p-invalid":!D.currentPass&&D.isSubmitted})},null,8,["modelValue","class"]),y]),(0,a.QD)("span",P,[(0,a.K2)(K,{modelValue:D.newPass,"onUpdate:modelValue":l[5]||(l[5]=s=>D.newPass=s),toggleMask:!0,class:(0,o.WN)({"p-invalid":!D.newPass&&D.isSubmitted})},null,8,["modelValue","class"]),b]),(0,a.QD)("span",v,[(0,a.K2)(K,{modelValue:D.confirmPass,"onUpdate:modelValue":l[6]||(l[6]=s=>D.confirmPass=s),toggleMask:!0,class:(0,o.WN)({"p-invalid":!D.confirmPass&&D.isSubmitted})},null,8,["modelValue","class"]),Q])],32)])),_:1},8,["visible"])])}e(3248);var V=e(100),C=e(6960),k=e(3716),U=e(8830),K=e(4434),M=e(2340),$=new M.c,E={components:{Dialog:V.c,InputText:C.c,Card:k.c,Button:U.c,Password:K.c},data(){return{fullname:this.$store.getters.getUser.fullname,username:this.$store.getters.getUser.username,email:this.$store.getters.getUser.email,displayModal:!1,currentPass:null,newPass:null,confirmPass:null,isSubmitted:!1,profileImg:null,isLoading:!1}},watch:{displayModal(){this.currentPass=null,this.newPass=null,this.confirmPass=null}},methods:{async handlePassword(){this.isSubmitted=!0;try{await $.user.changePassword({currentPassword:this.currentPass,password:this.newPass,passwordConfirmation:this.confirmPass})}catch(s){console.log(s),this.$toast.add({severity:"error",summary:"Change password failed",detail:"• Incorrect current password",life:5e3})}finally{this.displayModal=!1,this.$toast.add({severity:"success",summary:"Change password successful!",detail:"You can sign in with the new password next time",life:3e3})}},getErrors(){let s=[];return this.v$.$silentErrors.map((l=>s.push(`• ${l.$message}`))),this.$toast.add({severity:"error",summary:"Change password failed",detail:s.join("\n"),life:5e3}),console.log(s)}}},S=e(4100);const N=(0,S.c)(E,[["render",D],["__scopeId","data-v-ac376848"]]);var x=N}}]);
//# sourceMappingURL=312.js.map